var Ts=Object.defineProperty,Rs=Object.defineProperties;var As=Object.getOwnPropertyDescriptors;var Ko=Object.getOwnPropertySymbols;var zs=Object.prototype.hasOwnProperty,Bs=Object.prototype.propertyIsEnumerable;var Zo=(e,t,n)=>t in e?Ts(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pe=(e,t)=>{for(var n in t||(t={}))zs.call(t,n)&&Zo(e,n,t[n]);if(Ko)for(var n of Ko(t))Bs.call(t,n)&&Zo(e,n,t[n]);return e},Te=(e,t)=>Rs(e,As(t));import{r as w,aM as So,P,O as J,au as sn,aQ as Is,aR as Je,aN as js,x as Hs,aO as Ls,aE as Go,be as wa,aP as qo,b0 as Qo,aT as Xs,aY as Sa,b2 as Ys}from"./index.f24e9f2e.js";import{F as Vs,D as Fs,a as Ws}from"./clsx.m.cfcded2a.js";import{T as xa,I as Jo,a as Us}from"./index.ee09ec43.js";var xo={exports:{}},Ks="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Zs=Ks,Gs=Zs;function Ca(){}function Oa(){}Oa.resetWarningCache=Ca;var qs=function(){function e(o,r,a,i,s,l){if(l!==Gs){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Oa,resetWarningCache:Ca};return n.PropTypes=n,n};xo.exports=qs();const er=e=>{const t=w.exports.useRef();return w.exports.useEffect(()=>{t.current=e}),t.current},Qs=()=>{const{currentJSON:e,dispatch:t}=So(),n=e.tracks||[],o=e.steps||[],r=er(n),a=g=>({slug:g,steps:o.map(m=>m==null?void 0:m.step.slug)}),[i,s]=w.exports.useState(()=>n==null?void 0:n.find(h=>h.slug==="default")),l=er(i.slug),c=g=>{const h=!!n.find(m=>m.slug===g);return!!g&&!h},u=g=>{const h=n.find(m=>m.slug===g);h&&s(h)};return w.exports.useEffect(()=>{u(i==null?void 0:i.slug)},[]),w.exports.useEffect(()=>{const g=n.length;(g>(r||[]).length||g<(r||[]).length&&i.slug===l)&&s(n[g-1])},[n]),{changeVisibleFlow:u,visibleFlow:i,addNewFlow:g=>{!c(g)||g&&t({type:"ADD_FLOW",payload:a(g)})},removeFlow:g=>{t({type:"REMOVE_FLOW",payload:{slug:g}})},renameFlow:(g,h)=>{!c(h)||t({type:"RENAME_FLOW",payload:{slug:g,newSlug:h}})},steps:o,flows:n}},Ea=e=>({background:e?"#e6f7ff":"unset",height:"35px",width:"35px",margin:"0px 5px",border:"none",cursor:"pointer",":hover":{opacity:.4}}),Js=e=>({background:e?"#e6f7ff":"unset",height:"40px",width:"80%",border:"none",paddingLeft:"5px"}),el=e=>({background:e?"#e6f7ff":"unset",color:e?"#1890ff":"#000000d9",height:"40px",width:"100%",maxWidth:"240px",display:"flex",alignItems:"center",padding:"0px 5px",margin:"5px 0px"});var tl={name:"zjik7",styles:"display:flex"},nl={name:"t10jb8",styles:"margin:5px"},ol={name:"42w0zf",styles:"width:44px;height:33px;margin:0px 2px"},rl={name:"42w0zf",styles:"width:44px;height:33px;margin:0px 2px"};const al=({title:e,isActive:t,renameFlow:n,removeFlow:o,changeVisibleFlow:r})=>{const[a,i]=w.exports.useState(!1),[s,l]=w.exports.useState(e),{confirm:c}=Ls;function u(f){c({title:`Do you want to delete this ${f}?`,icon:P(js,{}),content:"Are you sure you want to do this",onOk(){o(f)}})}const p=()=>J("form",{css:tl,onSubmit:f=>{f.preventDefault(),i(!1),n(e,s||e)},children:[P("input",{css:[Js(t),"",""],type:"text",value:s,onChange:f=>l(f.target.value),autoFocus:!0}),P(sn,{css:nl,disabled:e==="default",type:"primary",htmlType:"submit",icon:P(Hs,{})})]});return P("div",{css:[el(t),"",""],children:a?P(p,{}):J(Je,{children:[P("button",{css:[Ea(t),"width:95%;text-align:left;padding-left:8px;:hover{opacity:0.8;}",""],type:"button",onClick:()=>r(e),children:e}),P(sn,{css:ol,disabled:e==="default",type:"primary",icon:P(Vs,{}),onClick:()=>i(!0)}),P(sn,{css:rl,disabled:e==="default",type:"primary",danger:!0,icon:P(Is,{}),onClick:()=>u(e)})]})})};var il={name:"skuuvq",styles:"padding-right:19px"},sl={name:"9ikxmi",styles:"display:flex;align-items:center;padding:16px 24px;margin:0;background-color:#fff;font-weight:500;font-size:16px"},ll={name:"ti75j2",styles:"margin:0"};const cl=({flows:e,visibleFlow:t,addNewFlow:n,renameFlow:o,removeFlow:r,changeVisibleFlow:a})=>{const[i,s]=w.exports.useState(!1),[l,c]=w.exports.useState("");function u(f){c(Qo(f,{lower:!0}))}function p(){n(Qo(l)),c(""),s(!1)}return J("div",{css:il,children:[J("h2",{css:sl,children:["Flows list",P(xa,{title:"Flows list",placement:"topRight",content:"Rule ..... ... Flows list"})]}),P(Fs,{css:ll}),J(Go,{css:wa({width:"240px",height:`${document.body.clientHeight/1.3}px`},"",""),mode:"vertical",defaultSelectedKeys:[`flow-option-${t.slug}`],selectedKeys:[`flow-option-${t.slug}`],children:[e.map(({slug:f})=>P(al,{title:f,isActive:t.slug===f,renameFlow:o,removeFlow:r,changeVisibleFlow:a},`flow-option-${f}`)),P(Go.Item,{children:i?P("form",{onBlur:()=>s(!1),onSubmit:p,children:J(Jo.Group,{compact:!0,children:[P(Jo,{style:{width:"calc(100% - 32px)"},autoFocus:!0,onChange:f=>u(f.target.value),onBlur:f=>f.stopPropagation()}),P(sn,{icon:P(qo,{}),onClick:p})]})}):J("button",{css:[Ea(),"width:100%;color:#1890ff;display:flex;justify-content:flex-start;align-items:center;gap:10px;",""],onClick:()=>s(!0),children:[P(qo,{})," Add"]})},"add-item-form")]})]})};function ul(e){let t;const n=new Set,o=(c,u)=>{const p=typeof c=="function"?c(t):c;if(p!==t){const f=t;t=u?p:Object.assign({},t,p),n.forEach(d=>d(t,f))}},r=()=>t,a=(c,u=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(t);function d(){const g=u(t);if(!p(f,g)){const h=f;c(f=g,h)}}return n.add(d),()=>n.delete(d)},l={setState:o,getState:r,subscribe:(c,u,p)=>u||p?a(c,u,p):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return t=e(o,r,l),l}const dl=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),tr=dl?w.exports.useEffect:w.exports.useLayoutEffect;function fl(e){const t=typeof e=="function"?ul(e):e,n=(o=t.getState,r=Object.is)=>{const[,a]=w.exports.useReducer(m=>m+1,0),i=t.getState(),s=w.exports.useRef(i),l=w.exports.useRef(o),c=w.exports.useRef(r),u=w.exports.useRef(!1),p=w.exports.useRef();p.current===void 0&&(p.current=o(i));let f,d=!1;(s.current!==i||l.current!==o||c.current!==r||u.current)&&(f=o(i),d=!r(p.current,f)),tr(()=>{d&&(p.current=f),s.current=i,l.current=o,c.current=r,u.current=!1});const g=w.exports.useRef(i);tr(()=>{const m=()=>{try{const D=t.getState(),N=l.current(D);c.current(p.current,N)||(s.current=D,p.current=N,a())}catch{u.current=!0,a()}},b=t.subscribe(m);return t.getState()!==g.current&&m(),b},[]);const h=d?f:p.current;return w.exports.useDebugValue(h),h};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const o=[n,t];return{next(){const r=o.length<=0;return{value:o.shift(),done:r}}}},n}function pl(){const e=w.exports.createContext(void 0);return{Provider:({initialStore:r,createStore:a,children:i})=>{const s=w.exports.useRef();return s.current||(r&&(console.warn("Provider initialStore is deprecated and will be removed in the next version."),a||(a=()=>r)),s.current=a()),w.exports.createElement(e.Provider,{value:s.current},i)},useStore:(r,a=Object.is)=>{const i=w.exports.useContext(e);if(!i)throw new Error("Seems like you have not used zustand provider as an ancestor.");return i(r,a)},useStoreApi:()=>{const r=w.exports.useContext(e);if(!r)throw new Error("Seems like you have not used zustand provider as an ancestor.");return w.exports.useMemo(()=>({getState:r.getState,setState:r.setState,subscribe:r.subscribe,destroy:r.destroy}),[r])}}}var gl={value:()=>{}};function Co(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new ln(n)}function ln(e){this._=e}function hl(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}ln.prototype=Co.prototype={constructor:ln,on:function(e,t){var n=this._,o=hl(e+"",n),r,a=-1,i=o.length;if(arguments.length<2){for(;++a<i;)if((r=(e=o[a]).type)&&(r=vl(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(r=(e=o[a]).type)n[r]=nr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=nr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ln(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,a;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,r=a.length;o<r;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,n)}};function vl(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function nr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=gl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Jn="http://www.w3.org/1999/xhtml",or={svg:"http://www.w3.org/2000/svg",xhtml:Jn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function En(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),or.hasOwnProperty(t)?{space:or[t],local:e}:e}function ml(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Jn&&t.documentElement.namespaceURI===Jn?t.createElement(e):t.createElementNS(n,e)}}function yl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Na(e){var t=En(e);return(t.local?yl:ml)(t)}function bl(){}function Oo(e){return e==null?bl:function(){return this.querySelector(e)}}function wl(e){typeof e!="function"&&(e=Oo(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,s=o[r]=new Array(i),l,c,u=0;u<i;++u)(l=a[u])&&(c=e.call(l,l.__data__,u,a))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new we(o,this._parents)}function Sl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function xl(){return[]}function Pa(e){return e==null?xl:function(){return this.querySelectorAll(e)}}function Cl(e){return function(){return Sl(e.apply(this,arguments))}}function Ol(e){typeof e=="function"?e=Cl(e):e=Pa(e);for(var t=this._groups,n=t.length,o=[],r=[],a=0;a<n;++a)for(var i=t[a],s=i.length,l,c=0;c<s;++c)(l=i[c])&&(o.push(e.call(l,l.__data__,c,i)),r.push(l));return new we(o,r)}function _a(e){return function(){return this.matches(e)}}function Da(e){return function(t){return t.matches(e)}}var El=Array.prototype.find;function Nl(e){return function(){return El.call(this.children,e)}}function Pl(){return this.firstElementChild}function _l(e){return this.select(e==null?Pl:Nl(typeof e=="function"?e:Da(e)))}var Dl=Array.prototype.filter;function Ml(){return Array.from(this.children)}function kl(e){return function(){return Dl.call(this.children,e)}}function $l(e){return this.selectAll(e==null?Ml:kl(typeof e=="function"?e:Da(e)))}function Tl(e){typeof e!="function"&&(e=_a(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,s=o[r]=[],l,c=0;c<i;++c)(l=a[c])&&e.call(l,l.__data__,c,a)&&s.push(l);return new we(o,this._parents)}function Ma(e){return new Array(e.length)}function Rl(){return new we(this._enter||this._groups.map(Ma),this._parents)}function pn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pn.prototype={constructor:pn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Al(e){return function(){return e}}function zl(e,t,n,o,r,a){for(var i=0,s,l=t.length,c=a.length;i<c;++i)(s=t[i])?(s.__data__=a[i],o[i]=s):n[i]=new pn(e,a[i]);for(;i<l;++i)(s=t[i])&&(r[i]=s)}function Bl(e,t,n,o,r,a,i){var s,l,c=new Map,u=t.length,p=a.length,f=new Array(u),d;for(s=0;s<u;++s)(l=t[s])&&(f[s]=d=i.call(l,l.__data__,s,t)+"",c.has(d)?r[s]=l:c.set(d,l));for(s=0;s<p;++s)d=i.call(e,a[s],s,a)+"",(l=c.get(d))?(o[s]=l,l.__data__=a[s],c.delete(d)):n[s]=new pn(e,a[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(f[s])===l&&(r[s]=l)}function Il(e){return e.__data__}function jl(e,t){if(!arguments.length)return Array.from(this,Il);var n=t?Bl:zl,o=this._parents,r=this._groups;typeof e!="function"&&(e=Al(e));for(var a=r.length,i=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=o[c],p=r[c],f=p.length,d=Hl(e.call(u,u&&u.__data__,c,o)),g=d.length,h=s[c]=new Array(g),m=i[c]=new Array(g),b=l[c]=new Array(f);n(u,p,h,m,b,d,t);for(var D=0,N=0,k,S;D<g;++D)if(k=h[D]){for(D>=N&&(N=D+1);!(S=m[N])&&++N<g;);k._next=S||null}}return i=new we(i,o),i._enter=s,i._exit=l,i}function Hl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ll(){return new we(this._exit||this._groups.map(Ma),this._parents)}function Xl(e,t,n){var o=this.enter(),r=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?a.remove():n(a),o&&r?o.merge(r).order():r}function Yl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,a=o.length,i=Math.min(r,a),s=new Array(r),l=0;l<i;++l)for(var c=n[l],u=o[l],p=c.length,f=s[l]=new Array(p),d,g=0;g<p;++g)(d=c[g]||u[g])&&(f[g]=d);for(;l<r;++l)s[l]=n[l];return new we(s,this._parents)}function Vl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,a=o[r],i;--r>=0;)(i=o[r])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function Fl(e){e||(e=Wl);function t(p,f){return p&&f?e(p.__data__,f.__data__):!p-!f}for(var n=this._groups,o=n.length,r=new Array(o),a=0;a<o;++a){for(var i=n[a],s=i.length,l=r[a]=new Array(s),c,u=0;u<s;++u)(c=i[u])&&(l[u]=c);l.sort(t)}return new we(r,this._parents).order()}function Wl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ul(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Kl(){return Array.from(this)}function Zl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,a=o.length;r<a;++r){var i=o[r];if(i)return i}return null}function Gl(){let e=0;for(const t of this)++e;return e}function ql(){return!this.node()}function Ql(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],a=0,i=r.length,s;a<i;++a)(s=r[a])&&e.call(s,s.__data__,a,r);return this}function Jl(e){return function(){this.removeAttribute(e)}}function ec(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tc(e,t){return function(){this.setAttribute(e,t)}}function nc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ac(e,t){var n=En(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ec:Jl:typeof t=="function"?n.local?rc:oc:n.local?nc:tc)(n,t))}function ka(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ic(e){return function(){this.style.removeProperty(e)}}function sc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function lc(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function cc(e,t,n){return arguments.length>1?this.each((t==null?ic:typeof t=="function"?lc:sc)(e,t,n==null?"":n)):mt(this.node(),e)}function mt(e,t){return e.style.getPropertyValue(t)||ka(e).getComputedStyle(e,null).getPropertyValue(t)}function uc(e){return function(){delete this[e]}}function dc(e,t){return function(){this[e]=t}}function fc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function pc(e,t){return arguments.length>1?this.each((t==null?uc:typeof t=="function"?fc:dc)(e,t)):this.node()[e]}function $a(e){return e.trim().split(/^|\s+/)}function Eo(e){return e.classList||new Ta(e)}function Ta(e){this._node=e,this._names=$a(e.getAttribute("class")||"")}Ta.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ra(e,t){for(var n=Eo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Aa(e,t){for(var n=Eo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function gc(e){return function(){Ra(this,e)}}function hc(e){return function(){Aa(this,e)}}function vc(e,t){return function(){(t.apply(this,arguments)?Ra:Aa)(this,e)}}function mc(e,t){var n=$a(e+"");if(arguments.length<2){for(var o=Eo(this.node()),r=-1,a=n.length;++r<a;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?vc:t?gc:hc)(n,t))}function yc(){this.textContent=""}function bc(e){return function(){this.textContent=e}}function wc(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Sc(e){return arguments.length?this.each(e==null?yc:(typeof e=="function"?wc:bc)(e)):this.node().textContent}function xc(){this.innerHTML=""}function Cc(e){return function(){this.innerHTML=e}}function Oc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Ec(e){return arguments.length?this.each(e==null?xc:(typeof e=="function"?Oc:Cc)(e)):this.node().innerHTML}function Nc(){this.nextSibling&&this.parentNode.appendChild(this)}function Pc(){return this.each(Nc)}function _c(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Dc(){return this.each(_c)}function Mc(e){var t=typeof e=="function"?e:Na(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kc(){return null}function $c(e,t){var n=typeof e=="function"?e:Na(e),o=t==null?kc:typeof t=="function"?t:Oo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Tc(){var e=this.parentNode;e&&e.removeChild(this)}function Rc(){return this.each(Tc)}function Ac(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bc(e){return this.select(e?zc:Ac)}function Ic(e){return arguments.length?this.property("__data__",e):this.node().__data__}function jc(e){return function(t){e.call(this,t,this.__data__)}}function Hc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Lc(e){return function(){var t=this.__on;if(!!t){for(var n=0,o=-1,r=t.length,a;n<r;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function Xc(e,t,n){return function(){var o=this.__on,r,a=jc(t);if(o){for(var i=0,s=o.length;i<s;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function Yc(e,t,n){var o=Hc(e+""),r,a=o.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}return}for(s=t?Xc:Lc,r=0;r<a;++r)this.each(s(o[r],t,n));return this}function za(e,t,n){var o=ka(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Vc(e,t){return function(){return za(this,e,t)}}function Fc(e,t){return function(){return za(this,e,t.apply(this,arguments))}}function Wc(e,t){return this.each((typeof t=="function"?Fc:Vc)(e,t))}function*Uc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,a=o.length,i;r<a;++r)(i=o[r])&&(yield i)}var Ba=[null];function we(e,t){this._groups=e,this._parents=t}function It(){return new we([[document.documentElement]],Ba)}function Kc(){return this}we.prototype=It.prototype={constructor:we,select:wl,selectAll:Ol,selectChild:_l,selectChildren:$l,filter:Tl,data:jl,enter:Rl,exit:Ll,join:Xl,merge:Yl,selection:Kc,order:Vl,sort:Fl,call:Ul,nodes:Kl,node:Zl,size:Gl,empty:ql,each:Ql,attr:ac,style:cc,property:pc,classed:mc,text:Sc,html:Ec,raise:Pc,lower:Dc,append:Mc,insert:$c,remove:Rc,clone:Bc,datum:Ic,on:Yc,dispatch:Wc,[Symbol.iterator]:Uc};function Ze(e){return typeof e=="string"?new we([[document.querySelector(e)]],[document.documentElement]):new we([[e]],Ba)}function Zc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function We(e,t){if(e=Zc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const eo={capture:!0,passive:!1};function to(e){e.preventDefault(),e.stopImmediatePropagation()}function Gc(e){var t=e.document.documentElement,n=Ze(e).on("dragstart.drag",to,eo);"onselectstart"in t?n.on("selectstart.drag",to,eo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function qc(e,t){var n=e.document.documentElement,o=Ze(e).on("dragstart.drag",null);t&&(o.on("click.drag",to,eo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function No(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ia(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function jt(){}var Rt=.7,gn=1/Rt,gt="\\s*([+-]?\\d+)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qc=/^#([0-9a-f]{3,8})$/,Jc=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),eu=new RegExp(`^rgb\\(${Re},${Re},${Re}\\)$`),tu=new RegExp(`^rgba\\(${gt},${gt},${gt},${At}\\)$`),nu=new RegExp(`^rgba\\(${Re},${Re},${Re},${At}\\)$`),ou=new RegExp(`^hsl\\(${At},${Re},${Re}\\)$`),ru=new RegExp(`^hsla\\(${At},${Re},${Re},${At}\\)$`),rr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};No(jt,zt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ar,formatHex:ar,formatHex8:au,formatHsl:iu,formatRgb:ir,toString:ir});function ar(){return this.rgb().formatHex()}function au(){return this.rgb().formatHex8()}function iu(){return ja(this).formatHsl()}function ir(){return this.rgb().formatRgb()}function zt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Qc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sr(t):n===3?new ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Kt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Kt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Jc.exec(e))?new ve(t[1],t[2],t[3],1):(t=eu.exec(e))?new ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=tu.exec(e))?Kt(t[1],t[2],t[3],t[4]):(t=nu.exec(e))?Kt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ou.exec(e))?ur(t[1],t[2]/100,t[3]/100,1):(t=ru.exec(e))?ur(t[1],t[2]/100,t[3]/100,t[4]):rr.hasOwnProperty(e)?sr(rr[e]):e==="transparent"?new ve(NaN,NaN,NaN,0):null}function sr(e){return new ve(e>>16&255,e>>8&255,e&255,1)}function Kt(e,t,n,o){return o<=0&&(e=t=n=NaN),new ve(e,t,n,o)}function su(e){return e instanceof jt||(e=zt(e)),e?(e=e.rgb(),new ve(e.r,e.g,e.b,e.opacity)):new ve}function no(e,t,n,o){return arguments.length===1?su(e):new ve(e,t,n,o==null?1:o)}function ve(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}No(ve,no,Ia(jt,{brighter(e){return e=e==null?gn:Math.pow(gn,e),new ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ve(at(this.r),at(this.g),at(this.b),hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lr,formatHex:lr,formatHex8:lu,formatRgb:cr,toString:cr}));function lr(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}`}function lu(){return`#${rt(this.r)}${rt(this.g)}${rt(this.b)}${rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function cr(){const e=hn(this.opacity);return`${e===1?"rgb(":"rgba("}${at(this.r)}, ${at(this.g)}, ${at(this.b)}${e===1?")":`, ${e})`}`}function hn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function at(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rt(e){return e=at(e),(e<16?"0":"")+e.toString(16)}function ur(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new De(e,t,n,o)}function ja(e){if(e instanceof De)return new De(e.h,e.s,e.l,e.opacity);if(e instanceof jt||(e=zt(e)),!e)return new De;if(e instanceof De)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),a=Math.max(t,n,o),i=NaN,s=a-r,l=(a+r)/2;return s?(t===a?i=(n-o)/s+(n<o)*6:n===a?i=(o-t)/s+2:i=(t-n)/s+4,s/=l<.5?a+r:2-a-r,i*=60):s=l>0&&l<1?0:i,new De(i,s,l,e.opacity)}function cu(e,t,n,o){return arguments.length===1?ja(e):new De(e,t,n,o==null?1:o)}function De(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}No(De,cu,Ia(jt,{brighter(e){return e=e==null?gn:Math.pow(gn,e),new De(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new De(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ve(zn(e>=240?e-240:e+120,r,o),zn(e,r,o),zn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new De(dr(this.h),Zt(this.s),Zt(this.l),hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hn(this.opacity);return`${e===1?"hsl(":"hsla("}${dr(this.h)}, ${Zt(this.s)*100}%, ${Zt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dr(e){return e=(e||0)%360,e<0?e+360:e}function Zt(e){return Math.max(0,Math.min(1,e||0))}function zn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Ha=e=>()=>e;function uu(e,t){return function(n){return e+n*t}}function du(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function fu(e){return(e=+e)==1?La:function(t,n){return n-t?du(t,n,e):Ha(isNaN(t)?n:t)}}function La(e,t){var n=t-e;return n?uu(e,n):Ha(isNaN(e)?t:e)}var fr=function e(t){var n=fu(t);function o(r,a){var i=n((r=no(r)).r,(a=no(a)).r),s=n(r.g,a.g),l=n(r.b,a.b),c=La(r.opacity,a.opacity);return function(u){return r.r=i(u),r.g=s(u),r.b=l(u),r.opacity=c(u),r+""}}return o.gamma=e,o}(1);function Ue(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var oo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bn=new RegExp(oo.source,"g");function pu(e){return function(){return e}}function gu(e){return function(t){return e(t)+""}}function hu(e,t){var n=oo.lastIndex=Bn.lastIndex=0,o,r,a,i=-1,s=[],l=[];for(e=e+"",t=t+"";(o=oo.exec(e))&&(r=Bn.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(o=o[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,l.push({i,x:Ue(o,r)})),n=Bn.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?l[0]?gu(l[0].x):pu(t):(t=l.length,function(c){for(var u=0,p;u<t;++u)s[(p=l[u]).i]=p.x(c);return s.join("")})}var pr=180/Math.PI,ro={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xa(e,t,n,o,r,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*pr,skewX:Math.atan(l)*pr,scaleX:i,scaleY:s}}var Gt;function vu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ro:Xa(t.a,t.b,t.c,t.d,t.e,t.f)}function mu(e){return e==null||(Gt||(Gt=document.createElementNS("http://www.w3.org/2000/svg","g")),Gt.setAttribute("transform",e),!(e=Gt.transform.baseVal.consolidate()))?ro:(e=e.matrix,Xa(e.a,e.b,e.c,e.d,e.e,e.f))}function Ya(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function a(c,u,p,f,d,g){if(c!==p||u!==f){var h=d.push("translate(",null,t,null,n);g.push({i:h-4,x:Ue(c,p)},{i:h-2,x:Ue(u,f)})}else(p||f)&&d.push("translate("+p+t+f+n)}function i(c,u,p,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:p.push(r(p)+"rotate(",null,o)-2,x:Ue(c,u)})):u&&p.push(r(p)+"rotate("+u+o)}function s(c,u,p,f){c!==u?f.push({i:p.push(r(p)+"skewX(",null,o)-2,x:Ue(c,u)}):u&&p.push(r(p)+"skewX("+u+o)}function l(c,u,p,f,d,g){if(c!==p||u!==f){var h=d.push(r(d)+"scale(",null,",",null,")");g.push({i:h-4,x:Ue(c,p)},{i:h-2,x:Ue(u,f)})}else(p!==1||f!==1)&&d.push(r(d)+"scale("+p+","+f+")")}return function(c,u){var p=[],f=[];return c=e(c),u=e(u),a(c.translateX,c.translateY,u.translateX,u.translateY,p,f),i(c.rotate,u.rotate,p,f),s(c.skewX,u.skewX,p,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,p,f),c=u=null,function(d){for(var g=-1,h=f.length,m;++g<h;)p[(m=f[g]).i]=m.x(d);return p.join("")}}}var yu=Ya(vu,"px, ","px)","deg)"),bu=Ya(mu,", ",")",")"),wu=1e-12;function gr(e){return((e=Math.exp(e))+1/e)/2}function Su(e){return((e=Math.exp(e))-1/e)/2}function xu(e){return((e=Math.exp(2*e))-1)/(e+1)}var Cu=function e(t,n,o){function r(a,i){var s=a[0],l=a[1],c=a[2],u=i[0],p=i[1],f=i[2],d=u-s,g=p-l,h=d*d+g*g,m,b;if(h<wu)b=Math.log(f/c)/t,m=function(C){return[s+C*d,l+C*g,c*Math.exp(t*C*b)]};else{var D=Math.sqrt(h),N=(f*f-c*c+o*h)/(2*c*n*D),k=(f*f-c*c-o*h)/(2*f*n*D),S=Math.log(Math.sqrt(N*N+1)-N),$=Math.log(Math.sqrt(k*k+1)-k);b=($-S)/t,m=function(C){var _=C*b,B=gr(S),A=c/(n*D)*(B*xu(t*_+S)-Su(S));return[s+A*d,l+A*g,c*B/gr(t*_+S)]}}return m.duration=b*1e3*t/Math.SQRT2,m}return r.rho=function(a){var i=Math.max(.001,+a),s=i*i,l=s*s;return e(i,s,l)},r}(Math.SQRT2,2,4),yt=0,Dt=0,Ot=0,Va=1e3,vn,Mt,mn=0,st=0,Nn=0,Bt=typeof performance=="object"&&performance.now?performance:Date,Fa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Po(){return st||(Fa(Ou),st=Bt.now()+Nn)}function Ou(){st=0}function yn(){this._call=this._time=this._next=null}yn.prototype=Wa.prototype={constructor:yn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Po():+n)+(t==null?0:+t),!this._next&&Mt!==this&&(Mt?Mt._next=this:vn=this,Mt=this),this._call=e,this._time=n,ao()},stop:function(){this._call&&(this._call=null,this._time=1/0,ao())}};function Wa(e,t,n){var o=new yn;return o.restart(e,t,n),o}function Eu(){Po(),++yt;for(var e=vn,t;e;)(t=st-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yt}function hr(){st=(mn=Bt.now())+Nn,yt=Dt=0;try{Eu()}finally{yt=0,Pu(),st=0}}function Nu(){var e=Bt.now(),t=e-mn;t>Va&&(Nn-=t,mn=e)}function Pu(){for(var e,t=vn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vn=n);Mt=e,ao(o)}function ao(e){if(!yt){Dt&&(Dt=clearTimeout(Dt));var t=e-st;t>24?(e<1/0&&(Dt=setTimeout(hr,e-Bt.now()-Nn)),Ot&&(Ot=clearInterval(Ot))):(Ot||(mn=Bt.now(),Ot=setInterval(Nu,Va)),yt=1,Fa(hr))}}function vr(e,t,n){var o=new yn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var _u=Co("start","end","cancel","interrupt"),Du=[],Ua=0,mr=1,io=2,cn=3,yr=4,so=5,un=6;function Pn(e,t,n,o,r,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Mu(e,n,{name:t,index:o,group:r,on:_u,tween:Du,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ua})}function _o(e,t){var n=Me(e,t);if(n.state>Ua)throw new Error("too late; already scheduled");return n}function Ae(e,t){var n=Me(e,t);if(n.state>cn)throw new Error("too late; already running");return n}function Me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Wa(a,0,n.time);function a(c){n.state=mr,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var u,p,f,d;if(n.state!==mr)return l();for(u in o)if(d=o[u],d.name===n.name){if(d.state===cn)return vr(i);d.state===yr?(d.state=un,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete o[u]):+u<t&&(d.state=un,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete o[u])}if(vr(function(){n.state===cn&&(n.state=yr,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=io,n.on.call("start",e,e.__data__,n.index,n.group),n.state===io){for(n.state=cn,r=new Array(f=n.tween.length),u=0,p=-1;u<f;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++p]=d);r.length=p+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=so,1),p=-1,f=r.length;++p<f;)r[p].call(e,u);n.state===so&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=un,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function dn(e,t){var n=e.__transition,o,r,a=!0,i;if(!!n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){a=!1;continue}r=o.state>io&&o.state<so,o.state=un,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}a&&delete e.__transition}}function ku(e){return this.each(function(){dn(this,e)})}function $u(e,t){var n,o;return function(){var r=Ae(this,e),a=r.tween;if(a!==n){o=n=a;for(var i=0,s=o.length;i<s;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function Tu(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var a=Ae(this,e),i=a.tween;if(i!==o){r=(o=i).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}a.tween=r}}function Ru(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Me(this.node(),n).tween,r=0,a=o.length,i;r<a;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?$u:Tu)(n,e,t))}function Do(e,t,n){var o=e._id;return e.each(function(){var r=Ae(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Me(r,o).value[t]}}function Ka(e,t){var n;return(typeof t=="number"?Ue:t instanceof zt?fr:(n=zt(t))?(t=n,fr):hu)(e,t)}function Au(e){return function(){this.removeAttribute(e)}}function zu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bu(e,t,n){var o,r=n+"",a;return function(){var i=this.getAttribute(e);return i===r?null:i===o?a:a=t(o=i,n)}}function Iu(e,t,n){var o,r=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?a:a=t(o=i,n)}}function ju(e,t,n){var o,r,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===o&&l===r?a:(r=l,a=t(o=i,s)))}}function Hu(e,t,n){var o,r,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===o&&l===r?a:(r=l,a=t(o=i,s)))}}function Lu(e,t){var n=En(e),o=n==="transform"?bu:Ka;return this.attrTween(e,typeof t=="function"?(n.local?Hu:ju)(n,o,Do(this,"attr."+e,t)):t==null?(n.local?zu:Au)(n):(n.local?Iu:Bu)(n,o,t))}function Xu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Vu(e,t){var n,o;function r(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Yu(e,a)),n}return r._value=t,r}function Fu(e,t){var n,o;function r(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&Xu(e,a)),n}return r._value=t,r}function Wu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=En(e);return this.tween(n,(o.local?Vu:Fu)(o,t))}function Uu(e,t){return function(){_o(this,e).delay=+t.apply(this,arguments)}}function Ku(e,t){return t=+t,function(){_o(this,e).delay=t}}function Zu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Uu:Ku)(t,e)):Me(this.node(),t).delay}function Gu(e,t){return function(){Ae(this,e).duration=+t.apply(this,arguments)}}function qu(e,t){return t=+t,function(){Ae(this,e).duration=t}}function Qu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Gu:qu)(t,e)):Me(this.node(),t).duration}function Ju(e,t){if(typeof t!="function")throw new Error;return function(){Ae(this,e).ease=t}}function ed(e){var t=this._id;return arguments.length?this.each(Ju(t,e)):Me(this.node(),t).ease}function td(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ae(this,e).ease=n}}function nd(e){if(typeof e!="function")throw new Error;return this.each(td(this._id,e))}function od(e){typeof e!="function"&&(e=_a(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,s=o[r]=[],l,c=0;c<i;++c)(l=a[c])&&e.call(l,l.__data__,c,a)&&s.push(l);return new He(o,this._parents,this._name,this._id)}function rd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,a=Math.min(o,r),i=new Array(o),s=0;s<a;++s)for(var l=t[s],c=n[s],u=l.length,p=i[s]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(p[d]=f);for(;s<o;++s)i[s]=t[s];return new He(i,this._parents,this._name,this._id)}function ad(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function id(e,t,n){var o,r,a=ad(t)?_o:Ae;return function(){var i=a(this,e),s=i.on;s!==o&&(r=(o=s).copy()).on(t,n),i.on=r}}function sd(e,t){var n=this._id;return arguments.length<2?Me(this.node(),n).on.on(e):this.each(id(n,e,t))}function ld(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function cd(){return this.on("end.remove",ld(this._id))}function ud(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Oo(e));for(var o=this._groups,r=o.length,a=new Array(r),i=0;i<r;++i)for(var s=o[i],l=s.length,c=a[i]=new Array(l),u,p,f=0;f<l;++f)(u=s[f])&&(p=e.call(u,u.__data__,f,s))&&("__data__"in u&&(p.__data__=u.__data__),c[f]=p,Pn(c[f],t,n,f,c,Me(u,n)));return new He(a,this._parents,t,n)}function dd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pa(e));for(var o=this._groups,r=o.length,a=[],i=[],s=0;s<r;++s)for(var l=o[s],c=l.length,u,p=0;p<c;++p)if(u=l[p]){for(var f=e.call(u,u.__data__,p,l),d,g=Me(u,n),h=0,m=f.length;h<m;++h)(d=f[h])&&Pn(d,t,n,h,f,g);a.push(f),i.push(u)}return new He(a,i,t,n)}var fd=It.prototype.constructor;function pd(){return new fd(this._groups,this._parents)}function gd(e,t){var n,o,r;return function(){var a=mt(this,e),i=(this.style.removeProperty(e),mt(this,e));return a===i?null:a===n&&i===o?r:r=t(n=a,o=i)}}function Za(e){return function(){this.style.removeProperty(e)}}function hd(e,t,n){var o,r=n+"",a;return function(){var i=mt(this,e);return i===r?null:i===o?a:a=t(o=i,n)}}function vd(e,t,n){var o,r,a;return function(){var i=mt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),mt(this,e))),i===l?null:i===o&&l===r?a:(r=l,a=t(o=i,s))}}function md(e,t){var n,o,r,a="style."+t,i="end."+a,s;return function(){var l=Ae(this,e),c=l.on,u=l.value[a]==null?s||(s=Za(t)):void 0;(c!==n||r!==u)&&(o=(n=c).copy()).on(i,r=u),l.on=o}}function yd(e,t,n){var o=(e+="")=="transform"?yu:Ka;return t==null?this.styleTween(e,gd(e,o)).on("end.style."+e,Za(e)):typeof t=="function"?this.styleTween(e,vd(e,o,Do(this,"style."+e,t))).each(md(this._id,e)):this.styleTween(e,hd(e,o,t),n).on("end.style."+e,null)}function bd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function wd(e,t,n){var o,r;function a(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&bd(e,i,n)),o}return a._value=t,a}function Sd(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,wd(e,t,n==null?"":n))}function xd(e){return function(){this.textContent=e}}function Cd(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Od(e){return this.tween("text",typeof e=="function"?Cd(Do(this,"text",e)):xd(e==null?"":e+""))}function Ed(e){return function(t){this.textContent=e.call(this,t)}}function Nd(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Ed(r)),t}return o._value=e,o}function Pd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Nd(e))}function _d(){for(var e=this._name,t=this._id,n=Ga(),o=this._groups,r=o.length,a=0;a<r;++a)for(var i=o[a],s=i.length,l,c=0;c<s;++c)if(l=i[c]){var u=Me(l,t);Pn(l,e,n,c,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new He(o,this._parents,e,n)}function Dd(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){--r===0&&a()}};n.each(function(){var c=Ae(this,o),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),r===0&&a()})}var Md=0;function He(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ga(){return++Md}var je=It.prototype;He.prototype={constructor:He,select:ud,selectAll:dd,selectChild:je.selectChild,selectChildren:je.selectChildren,filter:od,merge:rd,selection:pd,transition:_d,call:je.call,nodes:je.nodes,node:je.node,size:je.size,empty:je.empty,each:je.each,on:sd,attr:Lu,attrTween:Wu,style:yd,styleTween:Sd,text:Od,textTween:Pd,remove:cd,tween:Ru,delay:Zu,duration:Qu,ease:ed,easeVarying:nd,end:Dd,[Symbol.iterator]:je[Symbol.iterator]};function kd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $d={time:null,delay:0,duration:250,ease:kd};function Td(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Rd(e){var t,n;e instanceof He?(t=e._id,e=e._name):(t=Ga(),(n=$d).time=Po(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,a=0;a<r;++a)for(var i=o[a],s=i.length,l,c=0;c<s;++c)(l=i[c])&&Pn(l,e,t,c,i,n||Td(l,t));return new He(o,this._parents,e,t)}It.prototype.interrupt=ku;It.prototype.transition=Rd;var qt=e=>()=>e;function Ad(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function qe(e,t,n){this.k=e,this.x=t,this.y=n}qe.prototype={constructor:qe,scale:function(e){return e===1?this:new qe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var it=new qe(1,0,0);function In(e){e.stopImmediatePropagation()}function Et(e){e.preventDefault(),e.stopImmediatePropagation()}function zd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Bd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function br(){return this.__zoom||it}function Id(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hd(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function Ld(){var e=zd,t=Bd,n=Hd,o=Id,r=jd,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Cu,c=Co("start","zoom","end"),u,p,f,d=500,g=150,h=0,m=10;function b(y){y.property("__zoom",br).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",V).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(y,R,O,I){var j=y.selection?y.selection():y;j.property("__zoom",br),y!==j?S(y,R,O,I):j.interrupt().each(function(){$(this,arguments).event(I).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},b.scaleBy=function(y,R,O,I){b.scaleTo(y,function(){var j=this.__zoom.k,z=typeof R=="function"?R.apply(this,arguments):R;return j*z},O,I)},b.scaleTo=function(y,R,O,I){b.transform(y,function(){var j=t.apply(this,arguments),z=this.__zoom,H=O==null?k(j):typeof O=="function"?O.apply(this,arguments):O,L=z.invert(H),v=typeof R=="function"?R.apply(this,arguments):R;return n(N(D(z,v),H,L),j,i)},O,I)},b.translateBy=function(y,R,O,I){b.transform(y,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),i)},null,I)},b.translateTo=function(y,R,O,I,j){b.transform(y,function(){var z=t.apply(this,arguments),H=this.__zoom,L=I==null?k(z):typeof I=="function"?I.apply(this,arguments):I;return n(it.translate(L[0],L[1]).scale(H.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof O=="function"?-O.apply(this,arguments):-O),z,i)},I,j)};function D(y,R){return R=Math.max(a[0],Math.min(a[1],R)),R===y.k?y:new qe(R,y.x,y.y)}function N(y,R,O){var I=R[0]-O[0]*y.k,j=R[1]-O[1]*y.k;return I===y.x&&j===y.y?y:new qe(y.k,I,j)}function k(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function S(y,R,O,I){y.on("start.zoom",function(){$(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(I).end()}).tween("zoom",function(){var j=this,z=arguments,H=$(j,z).event(I),L=t.apply(j,z),v=O==null?k(L):typeof O=="function"?O.apply(j,z):O,x=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),E=j.__zoom,M=typeof R=="function"?R.apply(j,z):R,T=l(E.invert(v).concat(x/E.k),M.invert(v).concat(x/M.k));return function(X){if(X===1)X=M;else{var Y=T(X),K=x/Y[2];X=new qe(K,v[0]-Y[0]*K,v[1]-Y[1]*K)}H.zoom(null,X)}})}function $(y,R,O){return!O&&y.__zooming||new C(y,R)}function C(y,R){this.that=y,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,R),this.taps=0}C.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,R){return this.mouse&&y!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var R=Ze(this.that).datum();c.call(y,this.that,new Ad(y,{sourceEvent:this.sourceEvent,target:b,type:y,transform:this.that.__zoom,dispatch:c}),R)}};function _(y,...R){if(!e.apply(this,arguments))return;var O=$(this,R).event(y),I=this.__zoom,j=Math.max(a[0],Math.min(a[1],I.k*Math.pow(2,o.apply(this,arguments)))),z=We(y);if(O.wheel)(O.mouse[0][0]!==z[0]||O.mouse[0][1]!==z[1])&&(O.mouse[1]=I.invert(O.mouse[0]=z)),clearTimeout(O.wheel);else{if(I.k===j)return;O.mouse=[z,I.invert(z)],dn(this),O.start()}Et(y),O.wheel=setTimeout(H,g),O.zoom("mouse",n(N(D(I,j),O.mouse[0],O.mouse[1]),O.extent,i));function H(){O.wheel=null,O.end()}}function B(y,...R){if(f||!e.apply(this,arguments))return;var O=y.currentTarget,I=$(this,R,!0).event(y),j=Ze(y.view).on("mousemove.zoom",v,!0).on("mouseup.zoom",x,!0),z=We(y,O),H=y.clientX,L=y.clientY;Gc(y.view),In(y),I.mouse=[z,this.__zoom.invert(z)],dn(this),I.start();function v(E){if(Et(E),!I.moved){var M=E.clientX-H,T=E.clientY-L;I.moved=M*M+T*T>h}I.event(E).zoom("mouse",n(N(I.that.__zoom,I.mouse[0]=We(E,O),I.mouse[1]),I.extent,i))}function x(E){j.on("mousemove.zoom mouseup.zoom",null),qc(E.view,I.moved),Et(E),I.event(E).end()}}function A(y,...R){if(!!e.apply(this,arguments)){var O=this.__zoom,I=We(y.changedTouches?y.changedTouches[0]:y,this),j=O.invert(I),z=O.k*(y.shiftKey?.5:2),H=n(N(D(O,z),I,j),t.apply(this,R),i);Et(y),s>0?Ze(this).transition().duration(s).call(S,H,I,y):Ze(this).call(b.transform,H,I,y)}}function V(y,...R){if(!!e.apply(this,arguments)){var O=y.touches,I=O.length,j=$(this,R,y.changedTouches.length===I).event(y),z,H,L,v;for(In(y),H=0;H<I;++H)L=O[H],v=We(L,this),v=[v,this.__zoom.invert(v),L.identifier],j.touch0?!j.touch1&&j.touch0[2]!==v[2]&&(j.touch1=v,j.taps=0):(j.touch0=v,z=!0,j.taps=1+!!u);u&&(u=clearTimeout(u)),z&&(j.taps<2&&(p=v[0],u=setTimeout(function(){u=null},d)),dn(this),j.start())}}function W(y,...R){if(!!this.__zooming){var O=$(this,R).event(y),I=y.changedTouches,j=I.length,z,H,L,v;for(Et(y),z=0;z<j;++z)H=I[z],L=We(H,this),O.touch0&&O.touch0[2]===H.identifier?O.touch0[0]=L:O.touch1&&O.touch1[2]===H.identifier&&(O.touch1[0]=L);if(H=O.that.__zoom,O.touch1){var x=O.touch0[0],E=O.touch0[1],M=O.touch1[0],T=O.touch1[1],X=(X=M[0]-x[0])*X+(X=M[1]-x[1])*X,Y=(Y=T[0]-E[0])*Y+(Y=T[1]-E[1])*Y;H=D(H,Math.sqrt(X/Y)),L=[(x[0]+M[0])/2,(x[1]+M[1])/2],v=[(E[0]+T[0])/2,(E[1]+T[1])/2]}else if(O.touch0)L=O.touch0[0],v=O.touch0[1];else return;O.zoom("touch",n(N(H,L,v),O.extent,i))}}function U(y,...R){if(!!this.__zooming){var O=$(this,R).event(y),I=y.changedTouches,j=I.length,z,H;for(In(y),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),z=0;z<j;++z)H=I[z],O.touch0&&O.touch0[2]===H.identifier?delete O.touch0:O.touch1&&O.touch1[2]===H.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(H=We(H,this),Math.hypot(p[0]-H[0],p[1]-H[1])<m)){var L=Ze(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return b.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:qt(+y),b):o},b.filter=function(y){return arguments.length?(e=typeof y=="function"?y:qt(!!y),b):e},b.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:qt(!!y),b):r},b.extent=function(y){return arguments.length?(t=typeof y=="function"?y:qt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),b):t},b.scaleExtent=function(y){return arguments.length?(a[0]=+y[0],a[1]=+y[1],b):[a[0],a[1]]},b.translateExtent=function(y){return arguments.length?(i[0][0]=+y[0][0],i[1][0]=+y[1][0],i[0][1]=+y[0][1],i[1][1]=+y[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(y){return arguments.length?(n=y,b):n},b.duration=function(y){return arguments.length?(s=+y,b):s},b.interpolate=function(y){return arguments.length?(l=y,b):l},b.on=function(){var y=c.on.apply(c,arguments);return y===c?b:y},b.clickDistance=function(y){return arguments.length?(h=(y=+y)*y,b):Math.sqrt(h)},b.tapDistance=function(y){return arguments.length?(m=+y,b):m},b}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function qa(e,t){if(!!e){if(typeof e=="string")return lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lo(e,t)}}function Xd(e){if(Array.isArray(e))return e}function Yd(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,a=!1,i,s;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(o.push(i.value),!(t&&o.length===t));r=!0);}catch(l){a=!0,s=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(a)throw s}}return o}}function Vd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(e,t){return Xd(e)||Yd(e,t)||qa(e,t)||Vd()}var bt;(function(e){e.Strict="strict",e.Loose="loose"})(bt||(bt={}));var wt;(function(e){e.Lines="lines",e.Dots="dots"})(wt||(wt={}));var ht;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ht||(ht={}));var Ge;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ge||(Ge={}));var bn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(bn||(bn={}));var F;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(F||(F={}));var Mo=function(t){return{width:t.offsetWidth,height:t.offsetHeight}},vt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(t,n),o)},Qa=function(t,n){return{x:vt(t.x,n[0][0],n[1][0]),y:vt(t.y,n[0][1],n[1][1])}},Ja=function(t){var n,o;return((n=t.getRootNode)===null||n===void 0?void 0:n.call(t))||((o=window)===null||o===void 0?void 0:o.document)},ei=function(t,n){return{x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x2,n.x2),y2:Math.max(t.y2,n.y2)}},St=function(t){var n=t.x,o=t.y,r=t.width,a=t.height;return{x:n,y:o,x2:n+r,y2:o+a}},ti=function(t){var n=t.x,o=t.y,r=t.x2,a=t.y2;return{x:n,y:o,width:r-n,height:a-o}},Fd=function(t,n){return ti(ei(St(t),St(n)))},ni=function(t){return!isNaN(t)&&isFinite(t)};function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Sr(e,t){var n=e.find(function(s){return s.id===t.parentNode});if(n){var o=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(o>0||r>0||t.position.x<0||t.position.y<0){if(n.style=kt({},n.style)||{},o>0&&(n.style.width||(n.style.width=n.width),n.style.width+=o),r>0&&(n.style.height||(n.style.height=n.height),n.style.height+=r),t.position.x<0){var a=Math.abs(t.position.x);n.position.x=n.position.x-a,n.style.width+=a,t.position.x=0}if(t.position.y<0){var i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function oi(e,t){if(e.some(function(o){return o.type==="reset"}))return e.filter(function(o){return o.type==="reset"}).map(function(o){return o.item});var n=e.filter(function(o){return o.type==="add"}).map(function(o){return o.item});return t.reduce(function(o,r){var a=e.find(function(l){return l.id===r.id});if(a)switch(a.type){case"select":return o.push(kt(kt({},r),{},{selected:a.selected})),o;case"position":{var i=kt({},r);return typeof a.position!="undefined"&&(i.position=a.position),typeof a.dragging!="undefined"&&(i.dragging=a.dragging),i.expandParent&&Sr(o,i),o.push(i),o}case"dimensions":{var s=kt({},r);return typeof a.dimensions!="undefined"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),s.expandParent&&Sr(o,s),o.push(s),o}case"remove":return o}return o.push(r),o},n)}function ri(e,t){return oi(e,t)}function Wd(e,t){return oi(e,t)}var Ke=function(t,n){return{id:t,type:"select",selected:n}};function ft(e,t){return e.reduce(function(n,o){var r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(Ke(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(Ke(o.id,!1))),n},[])}function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Kd=function(t,n){var o=t.getBoundingClientRect();return{source:Cr(".source",t,o,n),target:Cr(".target",t,o,n)}},Cr=function(t,n,o,r){var a=n.querySelectorAll(t);if(!a||!a.length)return null;var i=Array.from(a);return i.map(function(s){var l=s.getBoundingClientRect(),c=Mo(s),u=s.getAttribute("data-handleid"),p=s.getAttribute("data-handlepos");return Ud({id:u,position:p,x:(l.left-o.left)/r,y:(l.top-o.top)/r},c)})};function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Or(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Zd=function(t){return"id"in t&&"source"in t&&"target"in t},Gd=function(t){var n=t.source,o=t.sourceHandle,r=t.target,a=t.targetHandle;return"reactflow__edge-".concat(n).concat(o||"","-").concat(r).concat(a||"")},co=function(t){return typeof t=="undefined"?"":typeof t=="string"?t:Object.keys(t).sort().map(function(n){return"".concat(n,"=").concat(t[n])}).join("&")},qd=function(t,n){return n.some(function(o){return o.source===t.source&&o.target===t.target&&(o.sourceHandle===t.sourceHandle||!o.sourceHandle&&!t.sourceHandle)&&(o.targetHandle===t.targetHandle||!o.targetHandle&&!t.targetHandle)})},ai=function(t,n){if(!t.source||!t.target)return console.warn("Can't create edge. An edge needs a source and a target."),n;var o;return Zd(t)?o=$t({},t):o=$t($t({},t),{},{id:Gd(t)}),qd(o,n)?n:n.concat(o)},Qd=function(t,n,o,r){var a=t.x,i=t.y,s=G(n,3),l=s[0],c=s[1],u=s[2],p=G(r,2),f=p[0],d=p[1],g={x:(a-l)/u,y:(i-c)/u};return o?{x:f*Math.round(g.x/f),y:d*Math.round(g.y/d)}:g},ko=function(t){var n=t.reduce(function(o,r){var a=r.positionAbsolute,i=r.position,s=r.width,l=r.height;return ei(o,St({x:a?a.x:i.x,y:a?a.y:i.y,width:s||0,height:l||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ti(n)},ii=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,1],r=G(o,3),a=r[0],i=r[1],s=r[2],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=St({x:(n.x-a)/s,y:(n.y-i)/s,width:n.width/s,height:n.height/s}),p=[];return t.forEach(function(f){var d=f.positionAbsolute,g=f.width,h=f.height,m=f.dragging,b=f.selectable,D=b===void 0?!0:b;if(c&&!D)return!1;var N=St($t($t({},d),{},{width:g||0,height:h||0})),k=Math.max(0,Math.min(u.x2,N.x2)-Math.max(u.x,N.x)),S=Math.max(0,Math.min(u.y2,N.y2)-Math.max(u.y,N.y)),$=Math.ceil(k*S),C=typeof g=="undefined"||typeof h=="undefined"||g===null||h===null||m,_=l&&$>0,B=(g||0)*(h||0),A=C||_||$>=B;A&&p.push(f)}),p},si=function(t,n){var o=t.map(function(r){return r.id});return n.filter(function(r){return o.includes(r.source)||o.includes(r.target)})},li=function(t,n,o,r,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.1,s=n/(t.width*(1+i)),l=o/(t.height*(1+i)),c=Math.min(s,l),u=vt(c,r,a),p=t.x+t.width/2,f=t.y+t.height/2,d=n/2-p*u,g=o/2-f*u;return[d,g,u]},nt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.transition().duration(n)};function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Er(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function ci(e,t,n,o){var r,a,i,s,l,c,u,p,f,d;if(!e.parentNode)return o;var g=t.get(e.parentNode);return ci(g,t,n,{x:((r=o.x)!==null&&r!==void 0?r:0)+((a=(i=g.position)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:0),y:((s=o.y)!==null&&s!==void 0?s:0)+((l=(c=g.position)===null||c===void 0?void 0:c.y)!==null&&l!==void 0?l:0),z:((u=g.z)!==null&&u!==void 0?u:0)>((p=o.z)!==null&&p!==void 0?p:0)?(f=g.z)!==null&&f!==void 0?f:0:(d=o.z)!==null&&d!==void 0?d:0})}function jn(e,t){var n=new Map,o={};return e.forEach(function(r){var a=ni(r.zIndex)?r.zIndex:r.dragging||r.selected?1e3:0,i=ot(ot(ot({},t.get(r.id)),r),{},{positionAbsolute:{x:r.position.x,y:r.position.y},z:a});r.parentNode&&(i.parentNode=r.parentNode,o[r.parentNode]=!0),n.set(r.id,i)}),n.forEach(function(r){if(r.parentNode&&!n.has(r.parentNode))throw new Error("Parent node ".concat(r.parentNode," not found"));if(r.parentNode||o[r.id]){var a,i=ci(r,n,o,ot(ot({},r.position),{},{z:(a=r.z)!==null&&a!==void 0?a:0})),s=i.x,l=i.y,c=i.z;r.positionAbsolute={x:s,y:l},r.z=c,o[r.id]&&(r.isParent=!0)}}),n}function ui(e,t){if(!e.parentNode)return!1;var n=t.get(e.parentNode);return n?n.selected?!0:ui(n,t):!1}function Nr(e){var t=e.node,n=e.diff,o=e.dragging,r=e.nodeExtent,a=e.nodeInternals,i={id:t.id,type:"position",dragging:!!o};if(n){var s={x:t.position.x+n.x,y:t.position.y+n.y},l=t.extent||r;if(t.extent==="parent")if(t.parentNode&&t.width&&t.height){var c=a.get(t.parentNode);l=c!=null&&c.width&&c!==null&&c!==void 0&&c.height?[[0,0],[c.width-t.width,c.height-t.height]]:l}else console.warn("Only child nodes can use parent extent"),l=r;i.position=l?Qa(s,l):s}return i}function di(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e(),o=n.nodeInternals,r=n.width,a=n.height,i=n.minZoom,s=n.maxZoom,l=n.d3Zoom,c=n.d3Selection,u=n.fitViewOnInitDone,p=n.fitViewOnInit;if((t.initial&&!u&&p||!t.initial)&&l&&c){var f=Array.from(o.values()).filter(function(_){return t.includeHiddenNodes?!_.parentNode&&_.width&&_.height:!_.parentNode&&!_.hidden}),d=f.every(function(_){return _.width&&_.height});if(f.length>0&&d){var g,h,m,b=ko(f),D=li(b,r,a,(g=t.minZoom)!==null&&g!==void 0?g:i,(h=t.maxZoom)!==null&&h!==void 0?h:s,(m=t.padding)!==null&&m!==void 0?m:.1),N=G(D,3),k=N[0],S=N[1],$=N[2],C=it.translate(k,S).scale($);return typeof t.duration=="number"&&t.duration>0?l.transform(nt(c,t.duration),C):l.transform(c,C),!0}}return!1}function Qt(e,t){return e.forEach(function(n){var o=t.get(n.id);o&&t.set(o.id,ot(ot({},o),{},{selected:n.selected}))}),new Map(t)}function Jt(e,t){return t.map(function(n){var o=e.find(function(r){return r.id===n.id});return o&&(n.selected=o.selected),n})}var Pr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],_r={width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Pr,nodeExtent:Pr,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:bt.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,reactFlowVersion:"10.0.8",connectionStartHandle:null,connectOnClick:!0};function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var $o=pl(),fi=$o.Provider,se=$o.useStore,Se=$o.useStoreApi,pi=function(){return fl(function(t,n){return Xe(Xe({},_r),{},{setNodes:function(r){t({nodeInternals:jn(r,n().nodeInternals)})},setEdges:function(r){var a=n(),i=a.defaultEdgeOptions;t(i?{edges:r.map(function(s){return Xe(Xe({},i),s)})}:{edges:r})},setDefaultNodesAndEdges:function(r,a){var i=typeof r!="undefined",s=typeof a!="undefined",l=i?jn(r,new Map):new Map,c=s?a:[];t({nodeInternals:l,edges:c,hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:function(r){var a=n(),i=a.onNodesChange,s=a.transform,l=a.nodeInternals,c=a.fitViewOnInit,u=a.fitViewOnInitDone,p=a.fitViewOnInitOptions,f=r.reduce(function(g,h){var m=l.get(h.id);if(m){var b=Mo(h.nodeElement),D=!!(b.width&&b.height&&(m.width!==b.width||m.height!==b.height||h.forceUpdate));if(D){var N=Kd(h.nodeElement,s[2]);l.set(m.id,Xe(Xe({},m),{},{handleBounds:N},b)),g.push({id:m.id,type:"dimensions",dimensions:b})}}return g},[]),d=u||c&&!u&&di(n,Xe({initial:!0},p));t({nodeInternals:new Map(l),fitViewOnInitDone:d}),(f==null?void 0:f.length)>0&&(i==null||i(f))},updateNodePosition:function(r){var a=r.id,i=r.diff,s=r.dragging,l=n(),c=l.onNodesChange,u=l.nodeExtent,p=l.nodeInternals,f=l.hasDefaultNodes;if(f||c){var d=[];if(p.forEach(function(m){m.selected?(!m.parentNode||!ui(m,p))&&d.push(Nr({node:m,diff:i,dragging:s,nodeExtent:u,nodeInternals:p})):m.id===a&&d.push(Nr({node:m,diff:i,dragging:s,nodeExtent:u,nodeInternals:p}))}),d!=null&&d.length){if(f){var g=ri(d,Array.from(p.values())),h=jn(g,p);t({nodeInternals:h})}c==null||c(d)}}},addSelectedNodes:function(r){var a,i=n(),s=i.multiSelectionActive,l=i.onNodesChange,c=i.nodeInternals,u=i.hasDefaultNodes,p=i.onEdgesChange,f=i.hasDefaultEdges,d=i.edges,g,h=null;s?g=r.map(function(m){return Ke(m,!0)}):(g=ft(Array.from(c.values()),r),h=ft(d,[])),g.length&&(u&&t({nodeInternals:Qt(g,c)}),l==null||l(g)),(a=h)!==null&&a!==void 0&&a.length&&(f&&t({edges:Jt(h,d)}),p==null||p(h))},addSelectedEdges:function(r){var a,i=n(),s=i.multiSelectionActive,l=i.onEdgesChange,c=i.edges,u=i.hasDefaultEdges,p=i.nodeInternals,f=i.hasDefaultNodes,d=i.onNodesChange,g,h=null;s?g=r.map(function(m){return Ke(m,!0)}):(g=ft(c,r),h=ft(Array.from(p.values()),[])),g.length&&(u&&t({edges:Jt(g,c)}),l==null||l(g)),(a=h)!==null&&a!==void 0&&a.length&&(f&&t({nodeInternals:Qt(h,p)}),d==null||d(h))},unselectNodesAndEdges:function(){var r=n(),a=r.nodeInternals,i=r.edges,s=r.onNodesChange,l=r.onEdgesChange,c=r.hasDefaultNodes,u=r.hasDefaultEdges,p=Array.from(a.values()),f=p.map(function(g){return g.selected=!1,Ke(g.id,!1)}),d=i.map(function(g){return Ke(g.id,!1)});f.length&&(c&&t({nodeInternals:Qt(f,a)}),s==null||s(f)),d.length&&(u&&t({edges:Jt(d,i)}),l==null||l(d))},setMinZoom:function(r){var a=n(),i=a.d3Zoom,s=a.maxZoom;i==null||i.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:function(r){var a=n(),i=a.d3Zoom,s=a.minZoom;i==null||i.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:function(r){var a=n(),i=a.d3Zoom;i==null||i.translateExtent(r),t({translateExtent:r})},resetSelectedElements:function(){var r=n(),a=r.nodeInternals,i=r.edges,s=r.onNodesChange,l=r.onEdgesChange,c=r.hasDefaultNodes,u=r.hasDefaultEdges,p=Array.from(a.values()),f=p.filter(function(g){return g.selected}).map(function(g){return Ke(g.id,!1)}),d=i.filter(function(g){return g.selected}).map(function(g){return Ke(g.id,!1)});f.length&&(c&&t({nodeInternals:Qt(f,a)}),s==null||s(f)),d.length&&(u&&t({edges:Jt(d,i)}),l==null||l(d))},setNodeExtent:function(r){var a=n(),i=a.nodeInternals;i.forEach(function(s){s.positionAbsolute=Qa(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(i)})},reset:function(){return t(Xe({},_r))}})})};function pe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Object.is(e[n[o]],t[n[o]]))return!1;return!0}function Jd(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,a;for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Ht(e,t){if(e==null)return{};var n=Jd(e,t),o,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],!(t.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(n[o]=e[o]))}return n}function ef(e){if(Array.isArray(e))return lo(e)}function tf(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nf(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qe(e){return ef(e)||tf(e)||qa(e)||nf()}var of={zoomIn:function(){},zoomOut:function(){},zoomTo:function(t){},getZoom:function(){return 1},setViewport:function(t){},getViewport:function(){return{x:0,y:0,zoom:1}},fitView:function(){},setCenter:function(t,n){},fitBounds:function(t){},project:function(t){return t},initialized:!1},rf=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}},af=function(){var t=Se(),n=se(rf,pe),o=n.d3Zoom,r=n.d3Selection,a=w.exports.useMemo(function(){return r&&o?{zoomIn:function(s){return o.scaleBy(nt(r,s==null?void 0:s.duration),1.2)},zoomOut:function(s){return o.scaleBy(nt(r,s==null?void 0:s.duration),1/1.2)},zoomTo:function(s,l){return o.scaleTo(nt(r,l==null?void 0:l.duration),s)},getZoom:function(){var s=G(t.getState().transform,3),l=s[2];return l},setViewport:function(s,l){var c=it.translate(s.x,s.y).scale(s.zoom);o.transform(nt(r,l==null?void 0:l.duration),c)},getViewport:function(){var s=G(t.getState().transform,3),l=s[0],c=s[1],u=s[2];return{x:l,y:c,zoom:u}},fitView:function(s){return di(t.getState,s)},setCenter:function(s,l,c){var u=t.getState(),p=u.width,f=u.height,d=u.maxZoom,g=typeof(c==null?void 0:c.zoom)!="undefined"?c.zoom:d,h=p/2-s*g,m=f/2-l*g,b=it.translate(h,m).scale(g);o.transform(nt(r,c==null?void 0:c.duration),b)},fitBounds:function(s,l){var c,u=t.getState(),p=u.width,f=u.height,d=u.minZoom,g=u.maxZoom,h=li(s,p,f,d,g,(c=l==null?void 0:l.padding)!==null&&c!==void 0?c:.1),m=G(h,3),b=m[0],D=m[1],N=m[2],k=it.translate(b,D).scale(N);o.transform(nt(r,l==null?void 0:l.duration),k)},project:function(s){var l=t.getState(),c=l.transform,u=l.snapToGrid,p=l.snapGrid;return Qd(s,c,u,p)},initialized:!0}:of},[o,r]);return a},sf=["initialized"];function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function gi(){var e=af(),t=e.initialized,n=Ht(e,sf),o=Se(),r=w.exports.useCallback(function(){var d=o.getState(),g=d.nodeInternals,h=Array.from(g.values());return h.map(function(m){return ut({},m)})},[]),a=w.exports.useCallback(function(d){var g=o.getState(),h=g.nodeInternals;return h.get(d)},[]),i=w.exports.useCallback(function(){var d=o.getState(),g=d.edges,h=g===void 0?[]:g;return h.map(function(m){return ut({},m)})},[]),s=w.exports.useCallback(function(d){var g=o.getState(),h=g.edges,m=h===void 0?[]:h;return m.find(function(b){return b.id===d})},[]),l=w.exports.useCallback(function(d){var g=o.getState(),h=g.nodeInternals,m=g.setNodes,b=g.hasDefaultNodes,D=g.onNodesChange,N=Array.from(h.values()),k=typeof d=="function"?d(N):d;if(b)m(k);else if(D){var S=k.map(function($){return{item:$,type:"reset"}});D(S)}},[]),c=w.exports.useCallback(function(d){var g=o.getState(),h=g.edges,m=h===void 0?[]:h,b=g.setEdges,D=g.hasDefaultEdges,N=g.onEdgesChange,k=typeof d=="function"?d(m):d;if(D)b(k);else if(N){var S=k.map(function($){return{item:$,type:"reset"}});N(S)}},[]),u=w.exports.useCallback(function(d){var g=Array.isArray(d)?d:[d],h=o.getState(),m=h.nodeInternals,b=h.setNodes,D=h.hasDefaultNodes,N=h.onNodesChange;if(D){var k=Array.from(m.values()),S=[].concat(Qe(k),Qe(g));b(S)}else if(N){var $=g.map(function(C){return{item:C,type:"add"}});N($)}},[]),p=w.exports.useCallback(function(d){var g=Array.isArray(d)?d:[d],h=o.getState(),m=h.edges,b=m===void 0?[]:m,D=h.setEdges,N=h.hasDefaultEdges,k=h.onEdgesChange;if(N)D([].concat(Qe(b),Qe(g)));else if(k){var S=g.map(function($){return{item:$,type:"add"}});k(S)}},[]),f=w.exports.useCallback(function(){var d=o.getState(),g=d.nodeInternals,h=d.edges,m=h===void 0?[]:h,b=d.transform,D=Array.from(g.values()),N=G(b,3),k=N[0],S=N[1],$=N[2];return{nodes:D.map(function(C){return ut({},C)}),edges:m.map(function(C){return ut({},C)}),viewport:{x:k,y:S,zoom:$}}},[]);return ut(ut({},n),{},{viewportInitialized:t,getNodes:r,getNode:a,getEdges:i,getEdge:s,setNodes:l,setEdges:c,addNodes:u,addEdges:p,toObject:f})}function ge(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ge(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var To={exports:{}},hi={},lf=Xs(Ws),ie={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.findInArray=cf;ze.isFunction=uf;ze.isNum=df;ze.int=ff;ze.dontSetMe=pf;function cf(e,t){for(var n=0,o=e.length;n<o;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function uf(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function df(e){return typeof e=="number"&&!isNaN(e)}function ff(e){return parseInt(e,10)}function pf(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getPrefix=vi;lt.browserPrefixToKey=mi;lt.browserPrefixToStyle=gf;lt.default=void 0;var Hn=["Moz","Webkit","O","ms"];function vi(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined")return"";var o=(e=window.document)===null||e===void 0||(t=e.documentElement)===null||t===void 0?void 0:t.style;if(!o||n in o)return"";for(var r=0;r<Hn.length;r++)if(mi(n,Hn[r])in o)return Hn[r];return""}function mi(e,t){return t?"".concat(t).concat(hf(e)):e}function gf(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function hf(e){for(var t="",n=!0,o=0;o<e.length;o++)n?(t+=e[o].toUpperCase(),n=!1):e[o]==="-"?n=!0:t+=e[o];return t}var vf=vi();lt.default=vf;function fn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fn=function(n){return typeof n}:fn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fn(e)}Object.defineProperty(ie,"__esModule",{value:!0});ie.matchesSelector=Si;ie.matchesSelectorAndParentsTo=yf;ie.addEvent=bf;ie.removeEvent=wf;ie.outerHeight=Sf;ie.outerWidth=xf;ie.innerHeight=Cf;ie.innerWidth=Of;ie.offsetXYFromParent=Ef;ie.createCSSTransform=Nf;ie.createSVGTransform=Pf;ie.getTranslation=Ro;ie.getTouch=_f;ie.getTouchIdentifier=Df;ie.addUserSelectStyles=Mf;ie.removeUserSelectStyles=kf;ie.addClassName=xi;ie.removeClassName=Ci;var be=ze,kr=mf(lt);function yi(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(yi=function(r){return r?n:t})(e)}function mf(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||fn(e)!=="object"&&typeof e!="function")return{default:e};var n=yi(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}function $r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function bi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$r(Object(n),!0).forEach(function(o){wi(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var en="";function Si(e,t){return en||(en=(0,be.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,be.isFunction)(e[n])})),(0,be.isFunction)(e[en])?e[en](t):!1}function yf(e,t,n){var o=e;do{if(Si(o,t))return!0;if(o===n)return!1;o=o.parentNode}while(o);return!1}function bf(e,t,n,o){if(!!e){var r=bi({capture:!0},o);e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}}function wf(e,t,n,o){if(!!e){var r=bi({capture:!0},o);e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}}function Sf(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,be.int)(n.borderTopWidth),t+=(0,be.int)(n.borderBottomWidth),t}function xf(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,be.int)(n.borderLeftWidth),t+=(0,be.int)(n.borderRightWidth),t}function Cf(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,be.int)(n.paddingTop),t-=(0,be.int)(n.paddingBottom),t}function Of(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,be.int)(n.paddingLeft),t-=(0,be.int)(n.paddingRight),t}function Ef(e,t,n){var o=t===t.ownerDocument.body,r=o?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-r.left)/n,i=(e.clientY+t.scrollTop-r.top)/n;return{x:a,y:i}}function Nf(e,t){var n=Ro(e,t,"px");return wi({},(0,kr.browserPrefixToKey)("transform",kr.default),n)}function Pf(e,t){var n=Ro(e,t,"");return n}function Ro(e,t,n){var o=e.x,r=e.y,a="translate(".concat(o).concat(n,",").concat(r).concat(n,")");if(t){var i="".concat(typeof t.x=="string"?t.x:t.x+n),s="".concat(typeof t.y=="string"?t.y:t.y+n);a="translate(".concat(i,", ").concat(s,")")+a}return a}function _f(e,t){return e.targetTouches&&(0,be.findInArray)(e.targetTouches,function(n){return t===n.identifier})||e.changedTouches&&(0,be.findInArray)(e.changedTouches,function(n){return t===n.identifier})}function Df(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function Mf(e){if(!!e){var t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&xi(e.body,"react-draggable-transparent-selection")}}function kf(e){if(!!e)try{if(e.body&&Ci(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function xi(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Ci(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.getBoundPosition=$f;Be.snapToGrid=Tf;Be.canDragX=Rf;Be.canDragY=Af;Be.getControlPosition=zf;Be.createCoreData=Bf;Be.createDraggableData=If;var ye=ze,pt=ie;function $f(e,t,n){if(!e.props.bounds)return[t,n];var o=e.props.bounds;o=typeof o=="string"?o:jf(o);var r=Ao(e);if(typeof o=="string"){var a=r.ownerDocument,i=a.defaultView,s;if(o==="parent"?s=r.parentNode:s=a.querySelector(o),!(s instanceof i.HTMLElement))throw new Error('Bounds selector "'+o+'" could not find an element.');var l=s,c=i.getComputedStyle(r),u=i.getComputedStyle(l);o={left:-r.offsetLeft+(0,ye.int)(u.paddingLeft)+(0,ye.int)(c.marginLeft),top:-r.offsetTop+(0,ye.int)(u.paddingTop)+(0,ye.int)(c.marginTop),right:(0,pt.innerWidth)(l)-(0,pt.outerWidth)(r)-r.offsetLeft+(0,ye.int)(u.paddingRight)-(0,ye.int)(c.marginRight),bottom:(0,pt.innerHeight)(l)-(0,pt.outerHeight)(r)-r.offsetTop+(0,ye.int)(u.paddingBottom)-(0,ye.int)(c.marginBottom)}}return(0,ye.isNum)(o.right)&&(t=Math.min(t,o.right)),(0,ye.isNum)(o.bottom)&&(n=Math.min(n,o.bottom)),(0,ye.isNum)(o.left)&&(t=Math.max(t,o.left)),(0,ye.isNum)(o.top)&&(n=Math.max(n,o.top)),[t,n]}function Tf(e,t,n){var o=Math.round(t/e[0])*e[0],r=Math.round(n/e[1])*e[1];return[o,r]}function Rf(e){return e.props.axis==="both"||e.props.axis==="x"}function Af(e){return e.props.axis==="both"||e.props.axis==="y"}function zf(e,t,n){var o=typeof t=="number"?(0,pt.getTouch)(e,t):null;if(typeof t=="number"&&!o)return null;var r=Ao(n),a=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,pt.offsetXYFromParent)(o||e,a,n.props.scale)}function Bf(e,t,n){var o=e.state,r=!(0,ye.isNum)(o.lastX),a=Ao(e);return r?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-o.lastX,deltaY:n-o.lastY,lastX:o.lastX,lastY:o.lastY,x:t,y:n}}function If(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function jf(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Ao(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var _n={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.default=Hf;function Hf(){}function Tt(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tt=function(n){return typeof n}:Tt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tt(e)}Object.defineProperty(_n,"__esModule",{value:!0});_n.default=void 0;var Ln=Xf(w.exports),me=zo(xo.exports),Lf=zo(Sa.exports),de=ie,tt=Be,Xn=ze,Nt=zo(Dn);function zo(e){return e&&e.__esModule?e:{default:e}}function Oi(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Oi=function(r){return r?n:t})(e)}function Xf(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Tt(e)!=="object"&&typeof e!="function")return{default:e};var n=Oi(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}function Yf(e,t){return Uf(e)||Wf(e,t)||Ff(e,t)||Vf()}function Vf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ff(e,t){if(!!e){if(typeof e=="string")return Tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tr(e,t)}}function Tr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Wf(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,a=!1,i,s;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(o.push(i.value),!(t&&o.length===t));r=!0);}catch(l){a=!0,s=l}finally{try{!r&&n.return!=null&&n.return()}finally{if(a)throw s}}return o}}function Uf(e){if(Array.isArray(e))return e}function Kf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zf(e,t,n){return t&&Rr(e.prototype,t),n&&Rr(e,n),e}function Gf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}function uo(e,t){return uo=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},uo(e,t)}function qf(e){var t=Jf();return function(){var o=wn(e),r;if(t){var a=wn(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return Qf(this,r)}}function Qf(e,t){if(t&&(Tt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}function fe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wn(e){return wn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},wn(e)}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Ye=_e.mouse,Mn=function(e){Gf(n,e);var t=qf(n);function n(){var o;Kf(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=t.call.apply(t,[this].concat(a)),Oe(fe(o),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Oe(fe(o),"mounted",!1),Oe(fe(o),"handleDragStart",function(s){if(o.props.onMouseDown(s),!o.props.allowAnyClick&&typeof s.button=="number"&&s.button!==0)return!1;var l=o.findDOMNode();if(!l||!l.ownerDocument||!l.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var c=l.ownerDocument;if(!(o.props.disabled||!(s.target instanceof c.defaultView.Node)||o.props.handle&&!(0,de.matchesSelectorAndParentsTo)(s.target,o.props.handle,l)||o.props.cancel&&(0,de.matchesSelectorAndParentsTo)(s.target,o.props.cancel,l))){s.type==="touchstart"&&s.preventDefault();var u=(0,de.getTouchIdentifier)(s);o.setState({touchIdentifier:u});var p=(0,tt.getControlPosition)(s,u,fe(o));if(p!=null){var f=p.x,d=p.y,g=(0,tt.createCoreData)(fe(o),f,d);(0,Nt.default)("DraggableCore: handleDragStart: %j",g),(0,Nt.default)("calling",o.props.onStart);var h=o.props.onStart(s,g);h===!1||o.mounted===!1||(o.props.enableUserSelectHack&&(0,de.addUserSelectStyles)(c),o.setState({dragging:!0,lastX:f,lastY:d}),(0,de.addEvent)(c,Ye.move,o.handleDrag),(0,de.addEvent)(c,Ye.stop,o.handleDragStop))}}}),Oe(fe(o),"handleDrag",function(s){var l=(0,tt.getControlPosition)(s,o.state.touchIdentifier,fe(o));if(l!=null){var c=l.x,u=l.y;if(Array.isArray(o.props.grid)){var p=c-o.state.lastX,f=u-o.state.lastY,d=(0,tt.snapToGrid)(o.props.grid,p,f),g=Yf(d,2);if(p=g[0],f=g[1],!p&&!f)return;c=o.state.lastX+p,u=o.state.lastY+f}var h=(0,tt.createCoreData)(fe(o),c,u);(0,Nt.default)("DraggableCore: handleDrag: %j",h);var m=o.props.onDrag(s,h);if(m===!1||o.mounted===!1){try{o.handleDragStop(new MouseEvent("mouseup"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.handleDragStop(b)}return}o.setState({lastX:c,lastY:u})}}),Oe(fe(o),"handleDragStop",function(s){if(!!o.state.dragging){var l=(0,tt.getControlPosition)(s,o.state.touchIdentifier,fe(o));if(l!=null){var c=l.x,u=l.y,p=(0,tt.createCoreData)(fe(o),c,u),f=o.props.onStop(s,p);if(f===!1||o.mounted===!1)return!1;var d=o.findDOMNode();d&&o.props.enableUserSelectHack&&(0,de.removeUserSelectStyles)(d.ownerDocument),(0,Nt.default)("DraggableCore: handleDragStop: %j",p),o.setState({dragging:!1,lastX:NaN,lastY:NaN}),d&&((0,Nt.default)("DraggableCore: Removing handlers"),(0,de.removeEvent)(d.ownerDocument,Ye.move,o.handleDrag),(0,de.removeEvent)(d.ownerDocument,Ye.stop,o.handleDragStop))}}}),Oe(fe(o),"onMouseDown",function(s){return Ye=_e.mouse,o.handleDragStart(s)}),Oe(fe(o),"onMouseUp",function(s){return Ye=_e.mouse,o.handleDragStop(s)}),Oe(fe(o),"onTouchStart",function(s){return Ye=_e.touch,o.handleDragStart(s)}),Oe(fe(o),"onTouchEnd",function(s){return Ye=_e.touch,o.handleDragStop(s)}),o}return Zf(n,[{key:"componentDidMount",value:function(){this.mounted=!0;var r=this.findDOMNode();r&&(0,de.addEvent)(r,_e.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.findDOMNode();if(r){var a=r.ownerDocument;(0,de.removeEvent)(a,_e.mouse.move,this.handleDrag),(0,de.removeEvent)(a,_e.touch.move,this.handleDrag),(0,de.removeEvent)(a,_e.mouse.stop,this.handleDragStop),(0,de.removeEvent)(a,_e.touch.stop,this.handleDragStop),(0,de.removeEvent)(r,_e.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,de.removeUserSelectStyles)(a)}}},{key:"findDOMNode",value:function(){var r,a,i;return(r=(a=this.props)===null||a===void 0||(i=a.nodeRef)===null||i===void 0?void 0:i.current)!==null&&r!==void 0?r:Lf.default.findDOMNode(this)}},{key:"render",value:function(){return Ln.cloneElement(Ln.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(Ln.Component);_n.default=Mn;Oe(Mn,"displayName","DraggableCore");Oe(Mn,"propTypes",{allowAnyClick:me.default.bool,disabled:me.default.bool,enableUserSelectHack:me.default.bool,offsetParent:function(t,n){if(t[n]&&t[n].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:me.default.arrayOf(me.default.number),handle:me.default.string,cancel:me.default.string,nodeRef:me.default.object,onStart:me.default.func,onDrag:me.default.func,onStop:me.default.func,onMouseDown:me.default.func,scale:me.default.number,className:Xn.dontSetMe,style:Xn.dontSetMe,transform:Xn.dontSetMe});Oe(Mn,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){function t(v){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(E){return typeof E}:t=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},t(v)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var n=g(w.exports),o=f(xo.exports),r=f(Sa.exports),a=f(lf),i=ie,s=Be,l=ze,c=f(_n),u=f(Dn),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function f(v){return v&&v.__esModule?v:{default:v}}function d(v){if(typeof WeakMap!="function")return null;var x=new WeakMap,E=new WeakMap;return(d=function(T){return T?E:x})(v)}function g(v,x){if(!x&&v&&v.__esModule)return v;if(v===null||t(v)!=="object"&&typeof v!="function")return{default:v};var E=d(x);if(E&&E.has(v))return E.get(v);var M={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in v)if(X!=="default"&&Object.prototype.hasOwnProperty.call(v,X)){var Y=T?Object.getOwnPropertyDescriptor(v,X):null;Y&&(Y.get||Y.set)?Object.defineProperty(M,X,Y):M[X]=v[X]}return M.default=v,E&&E.set(v,M),M}function h(){return h=Object.assign||function(v){for(var x=1;x<arguments.length;x++){var E=arguments[x];for(var M in E)Object.prototype.hasOwnProperty.call(E,M)&&(v[M]=E[M])}return v},h.apply(this,arguments)}function m(v,x){if(v==null)return{};var E=b(v,x),M,T;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(v);for(T=0;T<X.length;T++)M=X[T],!(x.indexOf(M)>=0)&&(!Object.prototype.propertyIsEnumerable.call(v,M)||(E[M]=v[M]))}return E}function b(v,x){if(v==null)return{};var E={},M=Object.keys(v),T,X;for(X=0;X<M.length;X++)T=M[X],!(x.indexOf(T)>=0)&&(E[T]=v[T]);return E}function D(v,x){var E=Object.keys(v);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);x&&(M=M.filter(function(T){return Object.getOwnPropertyDescriptor(v,T).enumerable})),E.push.apply(E,M)}return E}function N(v){for(var x=1;x<arguments.length;x++){var E=arguments[x]!=null?arguments[x]:{};x%2?D(Object(E),!0).forEach(function(M){H(v,M,E[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(E)):D(Object(E)).forEach(function(M){Object.defineProperty(v,M,Object.getOwnPropertyDescriptor(E,M))})}return v}function k(v,x){return B(v)||_(v,x)||$(v,x)||S()}function S(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(v,x){if(!!v){if(typeof v=="string")return C(v,x);var E=Object.prototype.toString.call(v).slice(8,-1);if(E==="Object"&&v.constructor&&(E=v.constructor.name),E==="Map"||E==="Set")return Array.from(v);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return C(v,x)}}function C(v,x){(x==null||x>v.length)&&(x=v.length);for(var E=0,M=new Array(x);E<x;E++)M[E]=v[E];return M}function _(v,x){var E=v==null?null:typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(E!=null){var M=[],T=!0,X=!1,Y,K;try{for(E=E.call(v);!(T=(Y=E.next()).done)&&(M.push(Y.value),!(x&&M.length===x));T=!0);}catch(Z){X=!0,K=Z}finally{try{!T&&E.return!=null&&E.return()}finally{if(X)throw K}}return M}}function B(v){if(Array.isArray(v))return v}function A(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function V(v,x){for(var E=0;E<x.length;E++){var M=x[E];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(v,M.key,M)}}function W(v,x,E){return x&&V(v.prototype,x),E&&V(v,E),v}function U(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),x&&y(v,x)}function y(v,x){return y=Object.setPrototypeOf||function(M,T){return M.__proto__=T,M},y(v,x)}function R(v){var x=j();return function(){var M=z(v),T;if(x){var X=z(this).constructor;T=Reflect.construct(M,arguments,X)}else T=M.apply(this,arguments);return O(this,T)}}function O(v,x){if(x&&(t(x)==="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I(v)}function I(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function j(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function z(v){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},z(v)}function H(v,x,E){return x in v?Object.defineProperty(v,x,{value:E,enumerable:!0,configurable:!0,writable:!0}):v[x]=E,v}var L=function(v){U(E,v);var x=R(E);function E(M){var T;return A(this,E),T=x.call(this,M),H(I(T),"onDragStart",function(X,Y){(0,u.default)("Draggable: onDragStart: %j",Y);var K=T.props.onStart(X,(0,s.createDraggableData)(I(T),Y));if(K===!1)return!1;T.setState({dragging:!0,dragged:!0})}),H(I(T),"onDrag",function(X,Y){if(!T.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",Y);var K=(0,s.createDraggableData)(I(T),Y),Z={x:K.x,y:K.y};if(T.props.bounds){var re=Z.x,q=Z.y;Z.x+=T.state.slackX,Z.y+=T.state.slackY;var ae=(0,s.getBoundPosition)(I(T),Z.x,Z.y),ee=k(ae,2),le=ee[0],Q=ee[1];Z.x=le,Z.y=Q,Z.slackX=T.state.slackX+(re-Z.x),Z.slackY=T.state.slackY+(q-Z.y),K.x=Z.x,K.y=Z.y,K.deltaX=Z.x-T.state.x,K.deltaY=Z.y-T.state.y}var xe=T.props.onDrag(X,K);if(xe===!1)return!1;T.setState(Z)}),H(I(T),"onDragStop",function(X,Y){if(!T.state.dragging)return!1;var K=T.props.onStop(X,(0,s.createDraggableData)(I(T),Y));if(K===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",Y);var Z={dragging:!1,slackX:0,slackY:0},re=Boolean(T.props.position);if(re){var q=T.props.position,ae=q.x,ee=q.y;Z.x=ae,Z.y=ee}T.setState(Z)}),T.state={dragging:!1,dragged:!1,x:M.position?M.position.x:M.defaultPosition.x,y:M.position?M.position.y:M.defaultPosition.y,prevPropsPosition:N({},M.position),slackX:0,slackY:0,isElementSVG:!1},M.position&&!(M.onDrag||M.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),T}return W(E,[{key:"componentDidMount",value:function(){typeof window.SVGElement!="undefined"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var T,X,Y;return(T=(X=this.props)===null||X===void 0||(Y=X.nodeRef)===null||Y===void 0?void 0:Y.current)!==null&&T!==void 0?T:r.default.findDOMNode(this)}},{key:"render",value:function(){var T,X=this.props;X.axis,X.bounds;var Y=X.children,K=X.defaultPosition,Z=X.defaultClassName,re=X.defaultClassNameDragging,q=X.defaultClassNameDragged,ae=X.position,ee=X.positionOffset;X.scale;var le=m(X,p),Q={},xe=null,ke=Boolean(ae),Ee=!ke||this.state.dragging,Ne=ae||K,Ce={x:(0,s.canDragX)(this)&&Ee?this.state.x:Ne.x,y:(0,s.canDragY)(this)&&Ee?this.state.y:Ne.y};this.state.isElementSVG?xe=(0,i.createSVGTransform)(Ce,ee):Q=(0,i.createCSSTransform)(Ce,ee);var et=(0,a.default)(Y.props.className||"",Z,(T={},H(T,re,this.state.dragging),H(T,q,this.state.dragged),T));return n.createElement(c.default,h({},le,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(Y),{className:et,style:N(N({},Y.props.style),Q),transform:xe}))}}],[{key:"getDerivedStateFromProps",value:function(T,X){var Y=T.position,K=X.prevPropsPosition;return Y&&(!K||Y.x!==K.x||Y.y!==K.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:Y,prevPropsPosition:K}),{x:Y.x,y:Y.y,prevPropsPosition:N({},Y)}):null}}]),E}(n.Component);e.default=L,H(L,"displayName","Draggable"),H(L,"propTypes",N(N({},c.default.propTypes),{},{axis:o.default.oneOf(["both","x","y","none"]),bounds:o.default.oneOfType([o.default.shape({left:o.default.number,right:o.default.number,top:o.default.number,bottom:o.default.number}),o.default.string,o.default.oneOf([!1])]),defaultClassName:o.default.string,defaultClassNameDragging:o.default.string,defaultClassNameDragged:o.default.string,defaultPosition:o.default.shape({x:o.default.number,y:o.default.number}),positionOffset:o.default.shape({x:o.default.oneOfType([o.default.number,o.default.string]),y:o.default.oneOfType([o.default.number,o.default.string])}),position:o.default.shape({x:o.default.number,y:o.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe})),H(L,"defaultProps",N(N({},c.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))})(hi);var Ei=hi,Ni=Ei.default,ep=Ei.DraggableCore;To.exports=Ni;To.exports.default=Ni;var Pi=To.exports.DraggableCore=ep,_i=function(t){var n=t.x,o=t.y,r=t.width,a=t.height,i=t.style,s=t.color,l=t.strokeColor,c=t.strokeWidth,u=t.className,p=t.borderRadius,f=t.shapeRendering,d=i||{},g=d.background,h=d.backgroundColor,m=s||g||h;return P("rect",{className:ge(["react-flow__minimap-node",u]),x:n,y:o,rx:p,ry:p,width:r,height:a,fill:m,stroke:l,strokeWidth:c,shapeRendering:f})};_i.displayName="MiniMapNode";var tp=w.exports.memo(_i),np=200,op=150,rp=function(t){return{width:t.width,height:t.height,transform:t.transform,nodeInternals:t.nodeInternals}},Di=function(t){var n=t.style,o=t.className,r=t.nodeStrokeColor,a=r===void 0?"#555":r,i=t.nodeColor,s=i===void 0?"#fff":i,l=t.nodeClassName,c=l===void 0?"":l,u=t.nodeBorderRadius,p=u===void 0?5:u,f=t.nodeStrokeWidth,d=f===void 0?2:f,g=t.maskColor,h=g===void 0?"rgb(240, 242, 243, 0.7)":g,m=se(rp,pe),b=m.width,D=m.height,N=m.transform,k=m.nodeInternals,S=G(N,3),$=S[0],C=S[1],_=S[2],B=ge(["react-flow__minimap",o]),A=(n==null?void 0:n.width)||np,V=(n==null?void 0:n.height)||op,W=s instanceof Function?s:function(){return s},U=a instanceof Function?a:function(){return a},y=c instanceof Function?c:function(){return c},R=k&&k.size>0,O=Array.from(k).map(function(re){var q=G(re,2);q[0];var ae=q[1];return ae}),I=ko(O),j={x:-$/_,y:-C/_,width:b/_,height:D/_},z=R?Fd(I,j):j,H=z.width/A,L=z.height/V,v=Math.max(H,L),x=v*A,E=v*V,M=5*v,T=z.x-(x-z.width)/2-M,X=z.y-(E-z.height)/2-M,Y=x+M*2,K=E+M*2,Z=typeof window=="undefined"||!!window.chrome?"crispEdges":"geometricPrecision";return J("svg",{width:A,height:V,viewBox:"".concat(T," ").concat(X," ").concat(Y," ").concat(K),style:n,className:B,children:[Array.from(k).filter(function(re){var q=G(re,2);q[0];var ae=q[1];return!ae.hidden&&ae.width&&ae.height}).map(function(re){var q,ae=G(re,2);ae[0];var ee=ae[1],le=(q=k.get(ee.id))===null||q===void 0?void 0:q.positionAbsolute;return P(tp,{x:(le==null?void 0:le.x)||0,y:(le==null?void 0:le.y)||0,width:ee.width,height:ee.height,style:ee.style,className:y(ee),color:W(ee),borderRadius:p,strokeColor:U(ee),strokeWidth:d,shapeRendering:Z},ee.id)}),P("path",{className:"react-flow__minimap-mask",d:"M".concat(T-M,",").concat(X-M,"h").concat(Y+M*2,"v").concat(K+M*2,"h").concat(-Y-M*2,`z
        M`).concat(j.x,",").concat(j.y,"h").concat(j.width,"v").concat(j.height,"h").concat(-j.width,"z"),fill:h,fillRule:"evenodd"})]})};Di.displayName="MiniMap";var ap=w.exports.memo(Di),Ar;function fo(){return fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},fo.apply(this,arguments)}var ip=function(t){return P("svg",Te(Pe({},fo({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},t)),{children:Ar||(Ar=P("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}))},zr;function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},po.apply(this,arguments)}var sp=function(t){return P("svg",Te(Pe({},po({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},t)),{children:zr||(zr=P("path",{d:"M0 0h32v4.2H0z"}))}))},Br;function go(){return go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},go.apply(this,arguments)}var lp=function(t){return P("svg",Te(Pe({},go({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},t)),{children:Br||(Br=P("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}))},Ir;function ho(){return ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ho.apply(this,arguments)}var cp=function(t){return P("svg",Te(Pe({},ho({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},t)),{children:Ir||(Ir=P("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}))},jr,up=function(t){return P("svg",Te(Pe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},t),{children:jr||(jr=P("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"}))}))},dp=["children","className"];function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function fp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var tn=function(t){var n=t.children,o=t.className,r=Ht(t,dp);return P("button",Te(Pe({},fp({type:"button",className:ge(["react-flow__controls-button",o])},r)),{children:n}))},pp=function(t){return t.nodesDraggable&&t.nodesConnectable&&t.elementsSelectable},Mi=function(t){var n=t.style,o=t.showZoom,r=o===void 0?!0:o,a=t.showFitView,i=a===void 0?!0:a,s=t.showInteractive,l=s===void 0?!0:s,c=t.fitViewOptions,u=t.onZoomIn,p=t.onZoomOut,f=t.onFitView,d=t.onInteractiveChange,g=t.className,h=t.children,m=Se(),b=w.exports.useState(!1),D=G(b,2),N=D[0],k=D[1],S=se(pp),$=gi(),C=$.zoomIn,_=$.zoomOut,B=$.fitView,A=ge(["react-flow__controls",g]),V=w.exports.useCallback(function(){C==null||C(),u==null||u()},[C,u]),W=w.exports.useCallback(function(){_==null||_(),p==null||p()},[_,p]),U=w.exports.useCallback(function(){B==null||B(c),f==null||f()},[B,c,f]),y=w.exports.useCallback(function(){m.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),d==null||d(!S)},[S,d]);return w.exports.useEffect(function(){k(!0)},[]),N?J("div",{className:A,style:n,children:[r&&J(Je,{children:[P(tn,{onClick:V,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:P(ip,{})}),P(tn,{onClick:W,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:P(sp,{})})]}),i&&P(tn,{className:"react-flow__controls-fitview",onClick:U,title:"fit view","aria-label":"fit view",children:P(lp,{})}),l&&P(tn,{className:"react-flow__controls-interactive",onClick:y,title:"toggle interactivity","aria-label":"toggle interactivity",children:S?P(up,{}):P(cp,{})}),h]}):null};Mi.displayName="Controls";var gp=w.exports.memo(Mi),hp=function(t,n,o){return P("path",{stroke:o,strokeWidth:n,d:"M".concat(t/2," 0 V").concat(t," M0 ").concat(t/2," H").concat(t)})},vp=function(t,n){return P("circle",{cx:t,cy:t,r:t,fill:n})},nn;function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var mp=(nn={},oe(nn,wt.Dots,"#81818a"),oe(nn,wt.Lines,"#eee"),nn),yp=function(t){return t.transform},ki=function(t){var n=t.variant,o=n===void 0?wt.Dots:n,r=t.gap,a=r===void 0?15:r,i=t.size,s=i===void 0?.4:i,l=t.color,c=t.style,u=t.className,p=se(yp),f=G(p,3),d=f[0],g=f[1],h=f[2],m=w.exports.useMemo(function(){return"pattern-".concat(Math.floor(Math.random()*1e5))},[]),b=ge(["react-flow__background","react-flow__container",u]),D=a*h,N=d%D,k=g%D,S=o===wt.Lines,$=l||mp[o],C=S?hp(D,s,$):vp(s*h,$);return J("svg",{className:b,style:Xr(Xr({},c),{},{width:"100%",height:"100%"}),children:[P("pattern",{id:m,x:N,y:k,width:D,height:D,patternUnits:"userSpaceOnUse",children:C}),P("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(m,")")})]})};ki.displayName="Background";var bp=w.exports.memo(ki);function wp(e){var t=e.proOptions,n=e.position,o=n===void 0?"bottom-right":n;if(((t==null?void 0:t.account)==="paid-sponsor"||(t==null?void 0:t.account)==="paid-enterprise"||(t==null?void 0:t.account)==="paid-custom")&&t!==null&&t!==void 0&&t.hideAttribution)return null;var r="".concat(o).split("-");return P("div",{className:ge(["react-flow__attribution"].concat(Qe(r))),"data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev/pricing",children:P("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer",children:"React Flow"})})}var Sp=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function xp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Cp=function(t){var n=t.x,o=t.y,r=t.label,a=t.labelStyle,i=a===void 0?{}:a,s=t.labelShowBg,l=s===void 0?!0:s,c=t.labelBgStyle,u=c===void 0?{}:c,p=t.labelBgPadding,f=p===void 0?[2,4]:p,d=t.labelBgBorderRadius,g=d===void 0?2:d,h=t.children,m=t.className,b=Ht(t,Sp),D=w.exports.useRef(null),N=w.exports.useState({x:0,y:0,width:0,height:0}),k=G(N,2),S=k[0],$=k[1],C=ge(["react-flow__edge-textwrapper",m]);return w.exports.useEffect(function(){if(D.current){var _=D.current.getBBox();$({x:_.x,y:_.y,width:_.width,height:_.height})}},[r]),typeof r=="undefined"||!r?null:J("g",Te(Pe({},xp({transform:"translate(".concat(n-S.width/2," ").concat(o-S.height/2,")"),className:C},b)),{children:[l&&P("rect",{width:S.width+2*f[0],x:-f[0],y:-f[1],height:S.height+2*f[1],className:"react-flow__edge-textbg",style:u,rx:g,ry:g}),P("text",{className:"react-flow__edge-text",y:S.height/2,dy:"0.3em",ref:D,style:i,children:r}),h]}))},Op=w.exports.memo(Cp),kn=function(e){var t=e.path,n=e.centerX,o=e.centerY,r=e.label,a=e.labelStyle,i=e.labelShowBg,s=e.labelBgStyle,l=e.labelBgPadding,c=e.labelBgBorderRadius,u=e.style,p=e.markerEnd,f=e.markerStart,d=r?P(Op,{x:n,y:o,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c}):null;return J(Je,{children:[P("path",{style:u,d:t,className:"react-flow__edge-path",markerEnd:p,markerStart:f}),d]})};function Sn(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,a=e.y2,i,s;switch(t){case F.Left:case F.Right:i=.5*(n+r),s=o;break;case F.Top:case F.Bottom:i=n,s=.5*(o+a);break}return[i,s]}function $i(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?F.Bottom:o,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?F.Top:s,c=Sn({pos:r,x1:t,y1:n,x2:a,y2:i}),u=G(c,2),p=u[0],f=u[1],d=Sn({pos:l,x1:a,y1:i,x2:t,y2:n}),g=G(d,2),h=g[0],m=g[1];return"M".concat(t,",").concat(n," C").concat(p,",").concat(f," ").concat(h,",").concat(m," ").concat(a,",").concat(i)}function Ep(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?F.Bottom:o,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?F.Top:s,c=Sn({pos:r,x1:t,y1:n,x2:a,y2:i}),u=G(c,2),p=u[0],f=u[1],d=Sn({pos:l,x1:a,y1:i,x2:t,y2:n}),g=G(d,2),h=g[0],m=g[1],b=t*.125+p*.375+h*.375+a*.125,D=n*.125+f*.375+m*.375+i*.125,N=Math.abs(b-t),k=Math.abs(D-n);return[b,D,N,k]}var Ti=w.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourcePosition,i=a===void 0?F.Bottom:a,s=e.targetPosition,l=s===void 0?F.Top:s,c=e.label,u=e.labelStyle,p=e.labelShowBg,f=e.labelBgStyle,d=e.labelBgPadding,g=e.labelBgBorderRadius,h=e.style,m=e.markerEnd,b=e.markerStart,D={sourceX:t,sourceY:n,sourcePosition:i,targetX:o,targetY:r,targetPosition:l},N=$i(D),k=Ep(D),S=G(k,2),$=S[0],C=S[1];return P(kn,{path:N,centerX:$,centerY:C,label:c,labelStyle:u,labelShowBg:p,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:g,style:h,markerEnd:m,markerStart:b})}),Vr=[F.Left,F.Right],Ri=function(t){var n=t.sourceX,o=t.sourceY,r=t.targetX,a=t.targetY,i=t.sourcePosition,s=i===void 0?F.Bottom:i,l=t.targetPosition,c=l===void 0?F.Top:l,u=Vr.includes(s),p=Vr.includes(c),f=u&&!p||p&&!u;if(f){var d=u?Math.abs(r-n):0,g=n>r?n-d:n+d,h=u?0:Math.abs(a-o),m=o<a?o+h:o-h;return[g,m,d,h]}var b=Math.abs(r-n)/2,D=r<n?r+b:r-b,N=Math.abs(a-o)/2,k=a<o?a+N:a-N;return[D,k,b,N]},Yn=function(t,n,o){return"L ".concat(t,",").concat(n-o,"Q ").concat(t,",").concat(n," ").concat(t+o,",").concat(n)},Vn=function(t,n,o){return"L ".concat(t+o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-o)},Fn=function(t,n,o){return"L ".concat(t,",").concat(n-o,"Q ").concat(t,",").concat(n," ").concat(t-o,",").concat(n)},Wn=function(t,n,o){return"L ".concat(t-o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n-o)},Un=function(t,n,o){return"L ".concat(t+o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+o)},Kn=function(t,n,o){return"L ".concat(t,",").concat(n+o,"Q ").concat(t,",").concat(n," ").concat(t+o,",").concat(n)},Zn=function(t,n,o){return"L ".concat(t,",").concat(n+o,"Q ").concat(t,",").concat(n," ").concat(t-o,",").concat(n)},Gn=function(t,n,o){return"L ".concat(t-o,",").concat(n,"Q ").concat(t,",").concat(n," ").concat(t,",").concat(n+o)};function vo(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?F.Bottom:o,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?F.Top:s,c=e.borderRadius,u=c===void 0?5:c,p=e.centerX,f=e.centerY,d=Ri({sourceX:t,sourceY:n,targetX:a,targetY:i}),g=G(d,4),h=g[0],m=g[1],b=g[2],D=g[3],N=Math.min(u,Math.abs(a-t)),k=Math.min(u,Math.abs(i-n)),S=Math.min(N,k,b,D),$=[F.Left,F.Right],C=typeof p!="undefined"?p:h,_=typeof f!="undefined"?f:m,B=null,A=null;return t<=a?(B=n<=i?Yn(t,_,S):Kn(t,_,S),A=n<=i?Gn(a,_,S):Wn(a,_,S)):(B=n<i?Fn(t,_,S):Zn(t,_,S),A=n<i?Un(a,_,S):Vn(a,_,S)),$.includes(r)&&$.includes(l)?t<=a?(B=n<=i?Gn(C,n,S):Wn(C,n,S),A=n<=i?Yn(C,i,S):Kn(C,i,S)):(r===F.Right&&l===F.Left||r===F.Left&&l===F.Right||r===F.Left&&l===F.Left)&&(B=n<=i?Un(C,n,S):Vn(C,n,S),A=n<=i?Fn(C,i,S):Zn(C,i,S)):$.includes(r)&&!$.includes(l)?(t<=a?B=n<=i?Gn(a,n,S):Wn(a,n,S):B=n<=i?Un(a,n,S):Vn(a,n,S),A=""):!$.includes(r)&&$.includes(l)&&(t<=a?B=n<=i?Yn(t,i,S):Kn(t,i,S):B=n<=i?Fn(t,i,S):Zn(t,i,S),A=""),"M ".concat(t,",").concat(n).concat(B).concat(A,"L ").concat(a,",").concat(i)}var Bo=w.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,c=e.labelBgPadding,u=e.labelBgBorderRadius,p=e.style,f=e.sourcePosition,d=f===void 0?F.Bottom:f,g=e.targetPosition,h=g===void 0?F.Top:g,m=e.markerEnd,b=e.markerStart,D=e.borderRadius,N=D===void 0?5:D,k=Ri({sourceX:t,sourceY:n,targetX:o,targetY:r,sourcePosition:d,targetPosition:h}),S=G(k,2),$=S[0],C=S[1],_=vo({sourceX:t,sourceY:n,sourcePosition:d,targetX:o,targetY:r,targetPosition:h,borderRadius:N});return P(kn,{path:_,centerX:$,centerY:C,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:p,markerEnd:m,markerStart:b})});function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Ai=w.exports.memo(function(e){return P(Bo,Pe({},Wr(Wr({},e),{},{borderRadius:0})))}),zi=w.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.label,i=e.labelStyle,s=e.labelShowBg,l=e.labelBgStyle,c=e.labelBgPadding,u=e.labelBgBorderRadius,p=e.style,f=e.markerEnd,d=e.markerStart,g=Math.abs(r-n)/2,h=r<n?r+g:r-g,m=Math.abs(o-t)/2,b=o<t?o+m:o-m,D="M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r);return P(kn,{path:D,centerX:b,centerY:h,label:a,labelStyle:i,labelShowBg:s,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,style:p,markerEnd:f,markerStart:d})});function on(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function xn(e){var t=e.pos,n=e.x1,o=e.y1,r=e.x2,a=e.y2,i=e.c,s,l;switch(t){case F.Left:s=n-on(n-r,i),l=o;break;case F.Right:s=n+on(r-n,i),l=o;break;case F.Top:s=n,l=o-on(o-a,i);break;case F.Bottom:s=n,l=o+on(a-o,i);break}return[s,l]}function Bi(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?F.Bottom:o,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?F.Top:s,c=e.curvature,u=c===void 0?.25:c,p=xn({pos:r,x1:t,y1:n,x2:a,y2:i,c:u}),f=G(p,2),d=f[0],g=f[1],h=xn({pos:l,x1:a,y1:i,x2:t,y2:n,c:u}),m=G(h,2),b=m[0],D=m[1];return"M".concat(t,",").concat(n," C").concat(d,",").concat(g," ").concat(b,",").concat(D," ").concat(a,",").concat(i)}function Np(e){var t=e.sourceX,n=e.sourceY,o=e.sourcePosition,r=o===void 0?F.Bottom:o,a=e.targetX,i=e.targetY,s=e.targetPosition,l=s===void 0?F.Top:s,c=e.curvature,u=c===void 0?.25:c,p=xn({pos:r,x1:t,y1:n,x2:a,y2:i,c:u}),f=G(p,2),d=f[0],g=f[1],h=xn({pos:l,x1:a,y1:i,x2:t,y2:n,c:u}),m=G(h,2),b=m[0],D=m[1],N=t*.125+d*.375+b*.375+a*.125,k=n*.125+g*.375+D*.375+i*.125,S=Math.abs(N-t),$=Math.abs(k-n);return[N,k,S,$]}var mo=w.exports.memo(function(e){var t=e.sourceX,n=e.sourceY,o=e.targetX,r=e.targetY,a=e.sourcePosition,i=a===void 0?F.Bottom:a,s=e.targetPosition,l=s===void 0?F.Top:s,c=e.label,u=e.labelStyle,p=e.labelShowBg,f=e.labelBgStyle,d=e.labelBgPadding,g=e.labelBgBorderRadius,h=e.style,m=e.markerEnd,b=e.markerStart,D=e.curvature,N={sourceX:t,sourceY:n,sourcePosition:i,targetX:o,targetY:r,targetPosition:l,curvature:D},k=Bi(N),S=Np(N),$=G(S,2),C=$[0],_=$[1];return P(kn,{path:k,centerX:C,centerY:_,label:c,labelStyle:u,labelShowBg:p,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:g,style:h,markerEnd:m,markerStart:b})}),Io=w.exports.createContext(null),Pp=Io.Provider;Io.Consumer;function yo(e,t,n,o,r,a,i){var s=i.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,c=(s==null?void 0:s.classList.contains("source"))||!1,u={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||c)){u.isHoveringHandle=!0;var p=t===bt.Strict?n&&c||!n&&l:!0;if(p){var f=s.getAttribute("data-nodeid"),d=s.getAttribute("data-handleid"),g=n?{source:f,sourceHandle:d,target:o,targetHandle:r}:{source:o,sourceHandle:r,target:f,targetHandle:d};u.connection=g,u.isValid=a(g)}}return u}function Ur(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Ii(e,t,n,o,r,a,i,s,l,c,u,p,f){var d=e.target.closest(".react-flow"),g=Ja(e.target);if(!g)return;var h=g.elementFromPoint(e.clientX,e.clientY),m=h==null?void 0:h.classList.contains("target"),b=h==null?void 0:h.classList.contains("source");if(!d||!m&&!b&&!l)return;var D=l||(m?"target":"source"),N=d.getBoundingClientRect(),k;o({connectionPosition:{x:e.clientX-N.left,y:e.clientY-N.top},connectionNodeId:n,connectionHandleId:t,connectionHandleType:D}),u==null||u(e,{nodeId:n,handleId:t,handleType:D});function S(C){o({connectionPosition:{x:C.clientX-N.left,y:C.clientY-N.top}});var _=yo(C,s,a,n,t,i,g),B=_.connection,A=_.elementBelow,V=_.isValid,W=_.isHoveringHandle;if(!W)return Ur(k);var U=B.source===B.target;!U&&A&&(k=A,A.classList.add("react-flow__handle-connecting"),A.classList.toggle("react-flow__handle-valid",V))}function $(C){var _=yo(C,s,a,n,t,i,g),B=_.connection,A=_.isValid;p==null||p(C),A&&(r==null||r(B)),f==null||f(C),l&&c&&c(C),Ur(k),o({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),g.removeEventListener("mousemove",S),g.removeEventListener("mouseup",$)}g.addEventListener("mousemove",S),g.addEventListener("mouseup",$)}var _p=["type","position","isValidConnection","isConnectable","id","onConnect","children","className"];function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Dp=function(){return!0},Mp=function(t){return{onConnectAction:t.onConnect,onConnectStart:t.onConnectStart,onConnectStop:t.onConnectStop,onConnectEnd:t.onConnectEnd,connectionMode:t.connectionMode,connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,hasDefaultEdges:t.hasDefaultEdges}},ji=w.exports.forwardRef(function(e,t){var n=e.type,o=n===void 0?"source":n,r=e.position,a=r===void 0?F.Top:r,i=e.isValidConnection,s=i===void 0?Dp:i,l=e.isConnectable,c=l===void 0?!0:l,u=e.id,p=e.onConnect,f=e.children,d=e.className,g=Ht(e,_p),h=Se(),m=w.exports.useContext(Io),b=se(Mp,pe),D=b.onConnectAction,N=b.onConnectStart,k=b.onConnectStop,S=b.onConnectEnd,$=b.connectionMode,C=b.connectionStartHandle,_=b.connectOnClick,B=b.hasDefaultEdges,A=u||null,V=o==="target",W=w.exports.useCallback(function(O){var I=h.getState(),j=I.defaultEdgeOptions,z=qn(qn({},j),O);if(B){var H=h.getState(),L=H.edges;h.setState({edges:ai(z,L)})}D==null||D(z),p==null||p(z)},[B,D,p]),U=w.exports.useCallback(function(O){O.button===0&&Ii(O,A,m,h.setState,W,V,s,$,void 0,void 0,N,k,S)},[A,m,W,V,s,$,N,k,S]),y=w.exports.useCallback(function(O){if(!C)N==null||N(O,{nodeId:m,handleId:A,handleType:o}),h.setState({connectionStartHandle:{nodeId:m,type:o,handleId:A}});else{var I=Ja(O.target),j=yo(O,$,C.type==="target",C.nodeId,C.handleId||null,s,I),z=j.connection,H=j.isValid;k==null||k(O),H&&W(z),S==null||S(O),h.setState({connectionStartHandle:null})}},[C,N,W,k,S,V,m,A,o]),R=ge(["react-flow__handle","react-flow__handle-".concat(a),"nodrag",d,{source:!V,target:V,connectable:c,connecting:(C==null?void 0:C.nodeId)===m&&(C==null?void 0:C.handleId)===A&&(C==null?void 0:C.type)===o}]);return P("div",Te(Pe({},qn({"data-handleid":A,"data-nodeid":m,"data-handlepos":a,className:R,onMouseDown:U,onClick:_?y:void 0,ref:t},g)),{children:f}))});ji.displayName="Handle";var Cn=w.exports.memo(ji),Hi=function(t){var n=t.data,o=t.isConnectable,r=t.targetPosition,a=r===void 0?F.Top:r,i=t.sourcePosition,s=i===void 0?F.Bottom:i;return J(Je,{children:[P(Cn,{type:"target",position:a,isConnectable:o}),n==null?void 0:n.label,P(Cn,{type:"source",position:s,isConnectable:o})]})};Hi.displayName="DefaultNode";var bo=w.exports.memo(Hi),Li=function(t){var n=t.data,o=t.isConnectable,r=t.sourcePosition,a=r===void 0?F.Bottom:r;return J(Je,{children:[n==null?void 0:n.label,P(Cn,{type:"source",position:a,isConnectable:o})]})};Li.displayName="InputNode";var Xi=w.exports.memo(Li),Yi=function(t){var n=t.data,o=t.isConnectable,r=t.targetPosition,a=r===void 0?F.Top:r;return J(Je,{children:[P(Cn,{type:"target",position:a,isConnectable:o}),n==null?void 0:n.label]})};Yi.displayName="OutputNode";var Vi=w.exports.memo(Yi),kp=function(t){return{selectedNodes:Array.from(t.nodeInternals.values()).filter(function(n){return n.selected}),selectedEdges:t.edges.filter(function(n){return n.selected})}},$p=function(t,n){var o=t.selectedNodes.map(function(s){return s.id}),r=n.selectedNodes.map(function(s){return s.id}),a=t.selectedEdges.map(function(s){return s.id}),i=n.selectedEdges.map(function(s){return s.id});return pe(o,r)&&pe(a,i)};function Tp(e){var t=e.onSelectionChange,n=se(kp,$p),o=n.selectedNodes,r=n.selectedEdges;return w.exports.useEffect(function(){t({nodes:o,edges:r})},[o,r]),null}var Rp=w.exports.memo(Tp),Ap=function(t){return{setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset}};function Ve(e,t){w.exports.useEffect(function(){typeof e!="undefined"&&t(e)},[e])}function ue(e,t,n){w.exports.useEffect(function(){typeof t!="undefined"&&n(oe({},e,t))},[t])}var zp=function(t){var n=t.nodes,o=t.edges,r=t.defaultNodes,a=t.defaultEdges,i=t.onConnect,s=t.onConnectStart,l=t.onConnectStop,c=t.onConnectEnd,u=t.nodesDraggable,p=t.nodesConnectable,f=t.minZoom,d=t.maxZoom,g=t.nodeExtent,h=t.onNodesChange,m=t.onEdgesChange,b=t.elementsSelectable,D=t.connectionMode,N=t.snapGrid,k=t.snapToGrid,S=t.translateExtent,$=t.connectOnClick,C=t.defaultEdgeOptions,_=t.fitView,B=t.fitViewOptions,A=t.onNodesDelete,V=t.onEdgesDelete,W=se(Ap,pe),U=W.setNodes,y=W.setEdges,R=W.setDefaultNodesAndEdges,O=W.setMinZoom,I=W.setMaxZoom,j=W.setTranslateExtent,z=W.setNodeExtent,H=W.reset,L=Se();return w.exports.useEffect(function(){return R(r,a),function(){H()}},[]),ue("defaultEdgeOptions",C,L.setState),ue("connectionMode",D,L.setState),ue("onConnect",i,L.setState),ue("onConnectStart",s,L.setState),ue("onConnectStop",l,L.setState),ue("onConnectEnd",c,L.setState),ue("nodesDraggable",u,L.setState),ue("nodesConnectable",p,L.setState),ue("elementsSelectable",b,L.setState),ue("snapToGrid",k,L.setState),ue("snapGrid",N,L.setState),ue("onNodesChange",h,L.setState),ue("onEdgesChange",m,L.setState),ue("connectOnClick",$,L.setState),ue("fitViewOnInit",_,L.setState),ue("fitViewOnInitOptions",B,L.setState),ue("onNodesDelete",A,L.setState),ue("onEdgesDelete",V,L.setState),Ve(n,U),Ve(o,y),Ve(r,U),Ve(a,y),Ve(f,O),Ve(d,I),Ve(S,j),Ve(g,z),null},Bp=".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__container{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__viewport{pointer-events:none;transform-origin:0 0;z-index:2}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow .react-flow__edges{overflow:visible;pointer-events:none}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{box-sizing:border-box;pointer-events:all;position:absolute;transform-origin:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{pointer-events:none;transform-origin:left top;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__controls{bottom:20px;left:15px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:20px;position:absolute;right:15px;z-index:5}.react-flow__attribution{background:hsla(0,0%,100%,.5);color:#999;font-size:10px;padding:2px 3px;position:absolute;z-index:1000}.react-flow__attribution a{color:#555;text-decoration:none}.react-flow__attribution.top{top:0}.react-flow__attribution.bottom{bottom:0}.react-flow__attribution.left{left:0}.react-flow__attribution.right{right:0}.react-flow__attribution.center{left:50%;transform:translateX(-50%)}",Ip=".react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-group,.react-flow__node-input,.react-flow__node-output{background:#fff;border:1px solid #1a192b;border-radius:3px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selected,.react-flow__node-default.selected:hover,.react-flow__node-group.selected,.react-flow__node-group.selected:hover,.react-flow__node-input.selected,.react-flow__node-input.selected:hover,.react-flow__node-output.selected,.react-flow__node-output.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle,.react-flow__node-group .react-flow__handle,.react-flow__node-input .react-flow__handle,.react-flow__node-output .react-flow__handle{background:#1a192b}.react-flow__node-default.selectable:hover,.react-flow__node-group.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-group{background:hsla(0,0%,94%,.25);border-color:#1a192b}.react-flow__node-group.selected,.react-flow__node-group.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__nodesselection-rect,.react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;position:absolute;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}",jp=function(t,n,o){return o===F.Left?t-n:o===F.Right?t+n:t},Hp=function(t,n,o){return o===F.Top?t-n:o===F.Bottom?t+n:t},Zr=function(t){var n=t.className,o=t.position,r=t.centerX,a=t.centerY,i=t.radius,s=i===void 0?10:i;return P("circle",{className:ge(["react-flow__edgeupdater",n]),cx:jp(r,s,o),cy:Hp(a,s,o),r:s,stroke:"transparent",fill:"transparent"})},Lp=function(t){return{addSelectedEdges:t.addSelectedEdges,connectionMode:t.connectionMode}},dt=function(e){var t=function(o){var r=o.id,a=o.className,i=o.type,s=o.data,l=o.onClick,c=o.onEdgeDoubleClick,u=o.selected,p=o.animated,f=o.label,d=o.labelStyle,g=o.labelShowBg,h=o.labelBgStyle,m=o.labelBgPadding,b=o.labelBgBorderRadius,D=o.style,N=o.source,k=o.target,S=o.sourceX,$=o.sourceY,C=o.targetX,_=o.targetY,B=o.sourcePosition,A=o.targetPosition,V=o.elementsSelectable,W=o.hidden,U=o.sourceHandleId,y=o.targetHandleId,R=o.onContextMenu,O=o.onMouseEnter,I=o.onMouseMove,j=o.onMouseLeave,z=o.edgeUpdaterRadius,H=o.onEdgeUpdate,L=o.onEdgeUpdateStart,v=o.onEdgeUpdateEnd,x=o.markerEnd,E=o.markerStart,M=Se(),T=se(Lp,pe),X=T.addSelectedEdges,Y=T.connectionMode,K=w.exports.useState(!1),Z=G(K,2),re=Z[0],q=Z[1],ae=!V&&!l,ee=typeof H!="undefined",le=ge(["react-flow__edge","react-flow__edge-".concat(i),a,{selected:u,animated:p,inactive:ae,updating:re}]),Q=w.exports.useMemo(function(){var te={id:r,source:N,target:k,type:i};return U&&(te.sourceHandle=U),y&&(te.targetHandle=y),typeof s!="undefined"&&(te.data=s),te},[r,N,k,i,U,y,s]),xe=w.exports.useCallback(function(te){V&&(M.setState({nodesSelectionActive:!1}),X([Q.id])),l==null||l(te,Q)},[V,Q,l]),ke=w.exports.useCallback(function(te){c==null||c(te,Q)},[Q,c]),Ee=w.exports.useCallback(function(te){R==null||R(te,Q)},[Q,R]),Ne=w.exports.useCallback(function(te){O==null||O(te,Q)},[Q,R]),Ce=w.exports.useCallback(function(te){I==null||I(te,Q)},[Q,R]),et=w.exports.useCallback(function(te){j==null||j(te,Q)},[Q,R]),Le=w.exports.useCallback(function(te,ct){var Lt=ct?k:N,$n=ct?y:U,Tn=function(){return!0},Xt=ct;L==null||L(te,Q);var Rn=v?function(Ct){return v(Ct,Q)}:void 0,Yt=function(Vt){var An=M.getState(),Ft=An.edges,Wt=Ft.find(function(Ut){return Ut.id===r});Wt&&H&&H(Wt,Vt)};Ii(te,$n,Lt,M.setState,Yt,Xt,Tn,Y,ct?"target":"source",Rn,M.getState)},[r,N,k,i,U,y,Q,H]),xt=w.exports.useCallback(function(te){Le(te,!0)},[r,N,U,Le]),ce=w.exports.useCallback(function(te){Le(te,!1)},[r,k,y,Le]),ne=w.exports.useCallback(function(){return q(!0)},[q]),he=w.exports.useCallback(function(){return q(!1)},[q]),Ie=w.exports.useMemo(function(){return"url(#".concat(co(E),")")},[E]),$e=w.exports.useMemo(function(){return"url(#".concat(co(x),")")},[x]);return W?null:J("g",{className:le,onClick:xe,onDoubleClick:ke,onContextMenu:Ee,onMouseEnter:Ne,onMouseMove:Ce,onMouseLeave:et,children:[P(e,{id:r,source:N,target:k,selected:u,animated:p,label:f,labelStyle:d,labelShowBg:g,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:b,data:s,style:D,sourceX:S,sourceY:$,targetX:C,targetY:_,sourcePosition:B,targetPosition:A,sourceHandleId:U,targetHandleId:y,markerStart:Ie,markerEnd:$e}),ee&&P("g",{onMouseDown:xt,onMouseEnter:ne,onMouseOut:he,children:P(Zr,{position:B,centerX:S,centerY:$,radius:z})}),ee&&P("g",{onMouseDown:ce,onMouseEnter:ne,onMouseOut:he,children:P(Zr,{position:A,centerX:C,centerY:_,radius:z})})]})};return t.displayName="EdgeWrapper",w.exports.memo(t)};function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gr(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Xp(e){var t={default:dt(e.default||mo),straight:dt(e.bezier||zi),step:dt(e.step||Ai),smoothstep:dt(e.step||Bo),simplebezier:dt(e.simplebezier||Ti)},n={},o=Object.keys(e).filter(function(r){return!["default","bezier"].includes(r)}).reduce(function(r,a){return r[a]=dt(e[a]||mo),r},n);return qr(qr({},t),o)}function Qr(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case F.Top:return{x:o+a/2,y:r};case F.Right:return{x:o+a,y:r+i/2};case F.Bottom:return{x:o+a/2,y:r+i};case F.Left:return{x:o,y:r+i/2}}}function Jr(e,t){if(!e)return null;var n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(function(o){return o.id===t})),typeof n=="undefined"?null:n}var Yp=function(t,n,o,r,a,i){var s=Qr(o,t,n),l=Qr(i,r,a);return{sourceX:s.x,sourceY:s.y,targetX:l.x,targetY:l.y}};function Vp(e){var t=e.sourcePos,n=e.targetPos,o=e.sourceWidth,r=e.sourceHeight,a=e.targetWidth,i=e.targetHeight,s=e.width,l=e.height,c=e.transform,u={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+o,n.x+a),y2:Math.max(t.y+r,n.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);var p=St({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:l/c[2]}),f=Math.max(0,Math.min(p.x2,u.x2)-Math.max(p.x,u.x)),d=Math.max(0,Math.min(p.y2,u.y2)-Math.max(p.y,u.y)),g=Math.ceil(f*d);return g>0}function ea(e,t){var n,o,r,a,i=e.get(t),s=i==null?void 0:i.handleBounds,l=!i||!i.handleBounds||!i.width||!i.height||typeof((n=i.positionAbsolute)===null||n===void 0?void 0:n.x)=="undefined"||typeof((o=i.positionAbsolute)===null||o===void 0?void 0:o.y)=="undefined";return[{x:(i==null||(r=i.positionAbsolute)===null||r===void 0?void 0:r.x)||0,y:(i==null||(a=i.positionAbsolute)===null||a===void 0?void 0:a.y)||0,width:(i==null?void 0:i.width)||0,height:(i==null?void 0:i.height)||0},s||null,!l]}var Fp=typeof document!="undefined"?document:null,On=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{target:Fp},n=w.exports.useState(!1),o=G(n,2),r=o[0],a=o[1],i=w.exports.useRef(new Set([])),s=w.exports.useMemo(function(){if(e!==null){var p=Array.isArray(e)?e:[e],f=p.filter(function(g){return typeof g=="string"}).map(function(g){return g.split("+")}),d=f.reduce(function(g,h){return g.concat.apply(g,Qe(h))},[]);return[f,d]}return[[],[]]},[e]),l=G(s,2),c=l[0],u=l[1];return w.exports.useEffect(function(){if(e!==null){var p,f,d=function(b){if(oa(b))return!1;var D=na(b.code,u);i.current.add(b[D]),ta(c,i.current,!1)&&(b.preventDefault(),a(!0))},g=function(b){if(oa(b))return!1;var D=na(b.code,u);ta(c,i.current,!0)?(a(!1),i.current.clear()):i.current.delete(b[D])},h=function(){i.current.clear(),a(!1)};return t==null||(p=t.target)===null||p===void 0||p.addEventListener("keydown",d),t==null||(f=t.target)===null||f===void 0||f.addEventListener("keyup",g),window.addEventListener("blur",h),function(){var m,b;t==null||(m=t.target)===null||m===void 0||m.removeEventListener("keydown",d),t==null||(b=t.target)===null||b===void 0||b.removeEventListener("keyup",g),window.removeEventListener("blur",h)}}},[e,a]),r};function ta(e,t,n){return e.filter(function(o){return n||o.length===t.size}).some(function(o){return o.every(function(r){return t.has(r)})})}function na(e,t){return t.includes(e)?"code":"key"}function oa(e){var t=e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))}var Wp=function(t){return{onNodesChange:t.onNodesChange,onEdgesChange:t.onEdgesChange}},Up=function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,o=Se(),r=se(Wp,pe),a=r.onNodesChange,i=r.onEdgesChange,s=On(t),l=On(n);w.exports.useEffect(function(){var c=o.getState(),u=c.nodeInternals,p=c.edges,f=c.hasDefaultNodes,d=c.hasDefaultEdges,g=c.onNodesDelete,h=c.onEdgesDelete,m=Array.from(u.values()),b=m.reduce(function(_,B){return(!B.selected&&B.parentNode&&_.find(function(A){return A.id===B.parentNode})||B.selected)&&_.push(B),_},[]),D=p.filter(function(_){return _.selected});if(s&&(b||D)){var N=si(b,p),k=[].concat(Qe(D),Qe(N)),S=k.reduce(function(_,B){return _.includes(B.id)||_.push(B.id),_},[]);if((d||f)&&(d&&o.setState({edges:p.filter(function(_){return!S.includes(_.id)})}),f&&(b.forEach(function(_){u.delete(_.id)}),o.setState({nodeInternals:new Map(u)}))),S.length>0&&(h==null||h(k),i)){var $=S.map(function(_){return{id:_,type:"remove"}});i($)}if(b.length>0&&(g==null||g(b),a)){var C=b.map(function(_){return{id:_.id,type:"remove"}});a(C)}o.setState({nodesSelectionActive:!1})}},[s,a,i]),w.exports.useEffect(function(){o.setState({multiSelectionActive:l})},[l])};function Kp(e){var t=Se();w.exports.useEffect(function(){var n,o=function(){if(!!e.current){var a=Mo(e.current);(a.height===0||a.width===0)&&console.warn("The React Flow parent container needs a width and a height to render the graph."),t.setState({width:a.width||500,height:a.height||500})}};return o(),window.onresize=o,e.current&&(n=new ResizeObserver(function(){return o()}),n.observe(e.current)),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}},[])}var Zp=function(t,n){return t.x!==n.x||t.y!==n.y||t.zoom!==n.k},Qn=function(t){return{x:t.x,y:t.y,zoom:t.k}},rn=function(t,n){return t.target.closest(".".concat(n))},Gp=function(t){return{d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler}},qp=function(t){var n=t.onMove,o=t.onMoveStart,r=t.onMoveEnd,a=t.zoomOnScroll,i=a===void 0?!0:a,s=t.zoomOnPinch,l=s===void 0?!0:s,c=t.panOnScroll,u=c===void 0?!1:c,p=t.panOnScrollSpeed,f=p===void 0?.5:p,d=t.panOnScrollMode,g=d===void 0?ht.Free:d,h=t.zoomOnDoubleClick,m=h===void 0?!0:h,b=t.selectionKeyPressed,D=t.elementsSelectable,N=t.panOnDrag,k=N===void 0?!0:N,S=t.defaultPosition,$=S===void 0?[0,0]:S,C=t.defaultZoom,_=C===void 0?1:C,B=t.zoomActivationKeyCode,A=t.preventScrolling,V=A===void 0?!0:A,W=t.children,U=t.noWheelClassName,y=t.noPanClassName,R=Se(),O=w.exports.useRef(null),I=w.exports.useRef({x:0,y:0,zoom:0}),j=se(Gp,pe),z=j.d3Zoom,H=j.d3Selection,L=j.d3ZoomHandler,v=On(B);return Kp(O),w.exports.useEffect(function(){if(O.current){var x=R.getState(),E=x.minZoom,M=x.maxZoom,T=x.translateExtent,X=Ld().scaleExtent([E,M]).translateExtent(T),Y=Ze(O.current).call(X),K=vt($[0],T[0][0],T[1][0]),Z=vt($[1],T[0][1],T[1][1]),re=vt(_,E,M),q=it.translate(K,Z).scale(re);X.transform(Y,q),R.setState({d3Zoom:X,d3Selection:Y,d3ZoomHandler:Y.on("wheel.zoom"),transform:[K,Z,re]})}},[]),w.exports.useEffect(function(){H&&z&&(u&&!v?H.on("wheel",function(x){if(rn(x,U))return!1;x.preventDefault(),x.stopImmediatePropagation();var E=H.property("__zoom").k||1;if(x.ctrlKey&&l){var M=We(x),T=-x.deltaY*(x.deltaMode===1?.05:x.deltaMode?1:.002)*10,X=E*Math.pow(2,T);z.scaleTo(H,X,M);return}var Y=x.deltaMode===1?20:1,K=g===ht.Vertical?0:x.deltaX*Y,Z=g===ht.Horizontal?0:x.deltaY*Y;z.translateBy(H,-(K/E)*f,-(Z/E)*f)}).on("wheel.zoom",null):typeof L!="undefined"&&H.on("wheel",function(x){if(!V||rn(x,U))return null;x.preventDefault()}).on("wheel.zoom",L))},[u,g,H,z,L,v,l,V,U]),w.exports.useEffect(function(){z&&(b?z.on("zoom",null):z.on("zoom",function(x){if(R.setState({transform:[x.transform.x,x.transform.y,x.transform.k]}),n){var E=Qn(x.transform);n(x.sourceEvent,E)}}))},[b,z,n]),w.exports.useEffect(function(){z&&(o?z.on("start",function(x){var E=Qn(x.transform);I.current=E,o(x.sourceEvent,E)}):z.on("start",null))},[z,o]),w.exports.useEffect(function(){z&&(r?z.on("end",function(x){if(Zp(I.current,x.transform)){var E=Qn(x.transform);I.current=E,r(x.sourceEvent,E)}}):z.on("end",null))},[z,r]),w.exports.useEffect(function(){z&&z.filter(function(x){var E=v||i,M=l&&x.ctrlKey;return!k&&!E&&!u&&!m&&!l||b||!m&&x.type==="dblclick"||rn(x,U)&&x.type==="wheel"||rn(x,y)&&x.type!=="wheel"||!l&&x.ctrlKey&&x.type==="wheel"||!E&&!u&&!M&&x.type==="wheel"||!k&&(x.type==="mousedown"||x.type==="touchstart")?!1:(!x.ctrlKey||x.type==="wheel")&&!x.button})},[z,i,l,u,m,k,b,D,v]),P("div",{className:"react-flow__renderer react-flow__container",ref:O,children:W})};function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ra(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function ia(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var Qp=function(t){return{userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable}},sa={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},Jp=w.exports.memo(function(e){var t=e.selectionKeyPressed,n=Se(),o=w.exports.useRef(0),r=w.exports.useRef(0),a=w.exports.useRef(),i=w.exports.useState(sa),s=G(i,2),l=s[0],c=s[1],u=se(Qp,pe),p=u.userSelectionActive,f=u.elementsSelectable,d=p||t,g=w.exports.useCallback(function(){c(sa),n.setState({userSelectionActive:!1}),o.current=0,r.current=0},[]),h=w.exports.useCallback(function(N){var k=N.target.closest(".react-flow");a.current=k.getBoundingClientRect();var S=ia(N,a.current);c({width:0,height:0,startX:S.x,startY:S.y,x:S.x,y:S.y,draw:!0}),n.setState({userSelectionActive:!0,nodesSelectionActive:!1})},[]),m=function(k){var S,$;if(!(!t||!l.draw||!a.current)){var C=ia(k,a.current),_=(S=l.startX)!==null&&S!==void 0?S:0,B=($=l.startY)!==null&&$!==void 0?$:0,A=aa(aa({},l),{},{x:C.x<_?C.x:_,y:C.y<B?C.y:B,width:Math.abs(C.x-_),height:Math.abs(C.y-B)}),V=n.getState(),W=V.nodeInternals,U=V.edges,y=V.transform,R=V.onNodesChange,O=V.onEdgesChange,I=Array.from(W).map(function(x){var E=G(x,2);E[0];var M=E[1];return M}),j=ii(W,A,y,!1,!0),z=si(j,U).map(function(x){return x.id}),H=j.map(function(x){return x.id});if(o.current!==H.length){o.current=H.length;var L=ft(I,H);L.length&&(R==null||R(L))}if(r.current!==z.length){r.current=z.length;var v=ft(U,z);v.length&&(O==null||O(v))}c(A)}},b=w.exports.useCallback(function(){n.setState({nodesSelectionActive:o.current>0}),g()},[]),D=w.exports.useCallback(function(){n.setState({nodesSelectionActive:!1}),g()},[]);return!f||!d?null:P("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:h,onMouseMove:m,onMouseUp:b,onMouseLeave:D,children:l.draw&&P("div",{className:"react-flow__selection react-flow__container",style:{width:l.width,height:l.height,transform:"translate(".concat(l.x,"px, ").concat(l.y,"px)")}})})}),eg=function(t){return{transform:t.transform,selectedNodesBbox:t.selectedNodesBbox,userSelectionActive:t.userSelectionActive,selectedNodes:Array.from(t.nodeInternals).filter(function(n){var o=G(n,2);o[0];var r=o[1];return r.selected}).map(function(n){var o=G(n,2);o[0];var r=o[1];return r}),snapToGrid:t.snapToGrid,snapGrid:t.snapGrid,updateNodePosition:t.updateNodePosition}};function tg(e){var t=e.onSelectionDragStart,n=e.onSelectionDrag,o=e.onSelectionDragStop,r=e.onSelectionContextMenu,a=e.noPanClassName,i=se(eg,pe),s=i.transform,l=i.userSelectionActive,c=i.selectedNodes,u=i.snapToGrid,p=i.snapGrid,f=i.updateNodePosition,d=G(s,3),g=d[0],h=d[1],m=d[2],b=w.exports.useRef(null),D=w.exports.useMemo(function(){return u?p:[1,1]},[u,p]),N=w.exports.useMemo(function(){return{transform:"translate(".concat(g,"px,").concat(h,"px) scale(").concat(m,")")}},[g,h,m]),k=w.exports.useMemo(function(){return ko(c)},[c]),S=w.exports.useMemo(function(){return{width:k.width,height:k.height,top:k.y,left:k.x}},[k]),$=w.exports.useCallback(function(A){t==null||t(A,c)},[t,c]),C=w.exports.useCallback(function(A,V){f({diff:{x:V.deltaX,y:V.deltaY},dragging:!0}),n==null||n(A,c)},[n,c,f]),_=w.exports.useCallback(function(A){f({dragging:!1}),o==null||o(A,c)},[c,o]),B=w.exports.useCallback(function(A){r==null||r(A,c)},[r,c]);return!(c!=null&&c.length)||l?null:P("div",{className:ge(["react-flow__nodesselection","react-flow__container",a]),style:N,children:P(Pi,{scale:m,grid:D,onStart:function(V){return $(V)},onDrag:function(V,W){return C(V,W)},onStop:function(V){return _(V)},nodeRef:b,enableUserSelectHack:!1,children:P("div",{ref:b,className:"react-flow__nodesselection-rect",onContextMenu:B,style:S})})})}var ng=w.exports.memo(tg),og=function(t){return{resetSelectedElements:t.resetSelectedElements,nodesSelectionActive:t.nodesSelectionActive}},Fi=function(t){var n=t.children,o=t.onPaneClick,r=t.onPaneContextMenu,a=t.onPaneScroll,i=t.deleteKeyCode,s=t.onMove,l=t.onMoveStart,c=t.onMoveEnd,u=t.selectionKeyCode,p=t.multiSelectionKeyCode,f=t.zoomActivationKeyCode,d=t.elementsSelectable,g=t.zoomOnScroll,h=t.zoomOnPinch,m=t.panOnScroll,b=t.panOnScrollSpeed,D=t.panOnScrollMode,N=t.zoomOnDoubleClick,k=t.panOnDrag,S=t.defaultPosition,$=t.defaultZoom,C=t.preventScrolling,_=t.onSelectionDragStart,B=t.onSelectionDrag,A=t.onSelectionDragStop,V=t.onSelectionContextMenu,W=t.noWheelClassName,U=t.noPanClassName,y=Se(),R=se(og,pe),O=R.resetSelectedElements,I=R.nodesSelectionActive,j=On(u);Up({deleteKeyCode:i,multiSelectionKeyCode:p});var z=w.exports.useCallback(function(v){o==null||o(v),O(),y.setState({nodesSelectionActive:!1})},[o]),H=w.exports.useCallback(function(v){return r==null?void 0:r(v)},[r]),L=w.exports.useCallback(function(v){return a==null?void 0:a(v)},[a]);return J(qp,{onMove:s,onMoveStart:l,onMoveEnd:c,selectionKeyPressed:j,elementsSelectable:d,zoomOnScroll:g,zoomOnPinch:h,panOnScroll:m,panOnScrollSpeed:b,panOnScrollMode:D,zoomOnDoubleClick:N,panOnDrag:k,defaultPosition:S,defaultZoom:$,zoomActivationKeyCode:f,preventScrolling:C,noWheelClassName:W,noPanClassName:U,children:[n,P(Jp,{selectionKeyPressed:j}),I&&P(ng,{onSelectionDragStart:_,onSelectionDrag:B,onSelectionDragStop:A,onSelectionContextMenu:V,noPanClassName:U}),P("div",{className:"react-flow__pane react-flow__container",onClick:z,onContextMenu:H,onWheel:L})]})};Fi.displayName="FlowRenderer";var rg=w.exports.memo(Fi);function ag(e){var t=se(w.exports.useCallback(function(n){return e?ii(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals).map(function(o){var r=G(o,2);r[0];var a=r[1];return a})},[e]));return t}var ig=function(t){return{scale:t.transform[2],nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,snapGrid:t.snapGrid,snapToGrid:t.snapToGrid,nodeInternals:t.nodeInternals}},Wi=function(t){var n=se(ig,pe),o=n.scale,r=n.nodesDraggable,a=n.nodesConnectable,i=n.elementsSelectable,s=n.updateNodeDimensions,l=n.snapGrid,c=n.snapToGrid,u=ag(t.onlyRenderVisibleElements),p=w.exports.useRef(),f=w.exports.useMemo(function(){if(typeof ResizeObserver=="undefined")return null;var d=new ResizeObserver(function(g){var h=g.map(function(m){return{id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}});s(h)});return p.current=d,d},[]);return w.exports.useEffect(function(){return function(){var d;p==null||(d=p.current)===null||d===void 0||d.disconnect()}},[]),P("div",{className:"react-flow__nodes react-flow__container",children:u.map(function(d){var g,h,m,b,D,N=d.type||"default";t.nodeTypes[N]||console.warn('Node type "'.concat(N,'" not found. Using fallback type "default".'));var k=t.nodeTypes[N]||t.nodeTypes.default,S=!!(d.draggable||r&&typeof d.draggable=="undefined"),$=!!(d.selectable||i&&typeof d.selectable=="undefined"),C=!!(d.connectable||a&&typeof d.connectable=="undefined");return P(k,{id:d.id,className:d.className,style:d.style,type:N,data:d.data,sourcePosition:d.sourcePosition||F.Bottom,targetPosition:d.targetPosition||F.Top,hidden:d.hidden,xPos:(g=(h=d.positionAbsolute)===null||h===void 0?void 0:h.x)!==null&&g!==void 0?g:0,yPos:(m=(b=d.positionAbsolute)===null||b===void 0?void 0:b.y)!==null&&m!==void 0?m:0,dragging:!!d.dragging,snapGrid:l,snapToGrid:c,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onNodeDoubleClick:t.onNodeDoubleClick,onNodeDragStart:t.onNodeDragStart,onNodeDrag:t.onNodeDrag,onNodeDragStop:t.onNodeDragStop,scale:o,selected:!!d.selected,isDraggable:S,isSelectable:$,isConnectable:C,resizeObserver:f,dragHandle:d.dragHandle,zIndex:(D=d.z)!==null&&D!==void 0?D:0,isParent:!!d.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName},d.id)})})};Wi.displayName="NodeRenderer";var sg=w.exports.memo(Wi);function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?la(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var lg=function(t){return{nodeInternals:t.nodeInternals,transform:t.transform}},cg=function(e){var t,n,o,r,a,i,s,l,c=e.connectionNodeId,u=e.connectionHandleId,p=e.connectionHandleType,f=e.connectionLineStyle,d=e.connectionPositionX,g=e.connectionPositionY,h=e.connectionLineType,m=h===void 0?Ge.Bezier:h,b=e.isConnectable,D=e.CustomConnectionLineComponent,N=c,k=u,S=se(lg,pe),$=S.nodeInternals,C=S.transform,_=w.exports.useRef($.get(N));if(!_.current||!_.current||!b||!((t=_.current.handleBounds)!==null&&t!==void 0&&t[p]))return null;var B=(n=_.current.handleBounds)===null||n===void 0?void 0:n[p],A=k?B==null?void 0:B.find(function(X){return X.id===k}):B==null?void 0:B[0],V=A?A.x+A.width/2:((o=(r=_.current)===null||r===void 0?void 0:r.width)!==null&&o!==void 0?o:0)/2,W=A?A.y+A.height/2:(a=(i=_.current)===null||i===void 0?void 0:i.height)!==null&&a!==void 0?a:0,U=(((s=_.current.positionAbsolute)===null||s===void 0?void 0:s.x)||0)+V,y=(((l=_.current.positionAbsolute)===null||l===void 0?void 0:l.y)||0)+W,R=(d-C[0])/C[2],O=(g-C[1])/C[2],I=A==null?void 0:A.position,j;switch(I){case F.Left:j=F.Right;break;case F.Right:j=F.Left;break;case F.Top:j=F.Bottom;break;case F.Bottom:j=F.Top;break}var z,H,L,v,x,E;switch(p){case"source":z=U,H=y,L=I,v=R,x=O,E=j;break;case"target":z=R,H=O,L=j,v=U,x=y,E=I;break}if(D)return P("g",{className:"react-flow__connection",children:P(D,{sourceX:z,sourceY:H,sourcePosition:L,targetX:v,targetY:x,targetPosition:E,connectionLineType:m,connectionLineStyle:f,fromNode:_.current,fromHandle:A,sourceNode:_.current,sourceHandle:A})});var M="",T={sourceX:z,sourceY:H,sourcePosition:L,targetX:v,targetY:x,targetPosition:E};return m===Ge.Bezier?M=Bi(T):m===Ge.Step?M=vo(ca(ca({},T),{},{borderRadius:0})):m===Ge.SmoothStep?M=vo(T):m===Ge.SimpleBezier?M=$i(T):M="M".concat(z,",").concat(H," ").concat(v,",").concat(x),P("g",{className:"react-flow__connection",children:P("path",{d:M,className:"react-flow__connection-path",style:f})})};function wo(e){return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wo(e)}var an,ug=function(t){var n=t.color,o=n===void 0?"none":n,r=t.strokeWidth,a=r===void 0?1:r;return P("polyline",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:"none",points:"-5,-4 0,0 -5,4"})},dg=function(t){var n=t.color,o=n===void 0?"none":n,r=t.strokeWidth,a=r===void 0?1:r;return P("polyline",{stroke:o,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:a,fill:o,points:"-5,-4 0,0 -5,4 -5,-4"})},ua=(an={},oe(an,bn.Arrow,ug),oe(an,bn.ArrowClosed,dg),an);function fg(e){var t=w.exports.useMemo(function(){var n=ua.hasOwnProperty(e);return n?ua[e]:(console.warn('marker type "'.concat(e,`" doesn't exist.`)),function(){return null})},[e]);return t}function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function pg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?da(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var gg=function(t){var n=t.id,o=t.type,r=t.color,a=t.width,i=a===void 0?12.5:a,s=t.height,l=s===void 0?12.5:s,c=t.markerUnits,u=c===void 0?"strokeWidth":c,p=t.strokeWidth,f=t.orient,d=f===void 0?"auto":f,g=fg(o);return P("marker",{className:"react-flow__arrowhead",id:n,markerWidth:"".concat(i),markerHeight:"".concat(l),viewBox:"-10 -10 20 20",markerUnits:u,orient:d,refX:"0",refY:"0",children:P(g,{color:r,strokeWidth:p})})},hg=function(t){return t.edges},Ui=function(t){var n=t.defaultColor,o=se(hg),r=w.exports.useMemo(function(){var a=[];return o.reduce(function(i,s){return[s.markerStart,s.markerEnd].forEach(function(l){if(l&&wo(l)==="object"){var c=co(l);a.includes(c)||(i.push(pg({id:c,color:l.color||n},l)),a.push(c))}}),i.sort(function(l,c){return l.id.localeCompare(c.id)})},[])},[o,n]);return P("defs",{children:r.map(function(a){return P(gg,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id)})})};Ui.displayName="MarkerDefinitions";var vg=[{level:0,isMaxLevel:!0,edges:[]}];function mg(e,t){var n=-1,o=e.reduce(function(a,i){var s,l,c=ni(i.zIndex)?i.zIndex:Math.max(((s=t.get(i.source))===null||s===void 0?void 0:s.z)||0,((l=t.get(i.target))===null||l===void 0?void 0:l.z)||0);return a[c]?a[c].push(i):a[c]=[i],n=c>n?c:n,a},{}),r=Object.entries(o).map(function(a){var i=G(a,2),s=i[0],l=i[1],c=+s;return{edges:l,level:c,isMaxLevel:c===n}});return r.length===0?vg:r}function yg(e,t){var n=se(w.exports.useCallback(function(o){return e?o.edges.filter(function(r){var a=t.get(r.source),i=t.get(r.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&Vp({sourcePos:a.position||{x:0,y:0},targetPos:i.position||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:i.width,targetHeight:i.height,width:o.width,height:o.height,transform:o.transform})}):o.edges},[e,t]));return mg(n,t)}var bg=function(t){return{connectionNodeId:t.connectionNodeId,connectionHandleId:t.connectionHandleId,connectionHandleType:t.connectionHandleType,connectionPosition:t.connectionPosition,nodesConnectable:t.nodesConnectable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals}},Ki=function(t){var n=se(bg,pe),o=n.connectionNodeId,r=n.connectionHandleId,a=n.connectionHandleType,i=n.connectionPosition,s=n.nodesConnectable,l=n.elementsSelectable,c=n.width,u=n.height,p=n.connectionMode,f=n.nodeInternals,d=yg(t.onlyRenderVisibleElements,f);if(!c)return null;var g=t.connectionLineType,h=t.defaultMarkerColor,m=t.connectionLineStyle,b=t.connectionLineComponent,D=o&&a;return P(Je,{children:d.map(function(N){var k=N.level,S=N.edges,$=N.isMaxLevel;return J("svg",{style:{zIndex:k},width:c,height:u,className:"react-flow__edges react-flow__container",children:[$&&P(Ui,{defaultColor:h}),J("g",{children:[S.map(function(C){var _=ea(f,C.source),B=G(_,3),A=B[0],V=B[1],W=B[2],U=ea(f,C.target),y=G(U,3),R=y[0],O=y[1],I=y[2];if(!W||!I)return null;var j=C.type||"default",z=t.edgeTypes[j]||t.edgeTypes.default,H=p===bt.Strict?O.target:O.target||O.source,L=Jr(V.source,C.sourceHandle||null),v=Jr(H,C.targetHandle||null),x=(L==null?void 0:L.position)||F.Bottom,E=(v==null?void 0:v.position)||F.Top;if(!L)return console.warn("couldn't create edge for source handle id: ".concat(C.sourceHandle,"; edge id: ").concat(C.id)),null;if(!v)return console.warn("couldn't create edge for target handle id: ".concat(C.targetHandle,"; edge id: ").concat(C.id)),null;var M=Yp(A,L,x,R,v,E),T=M.sourceX,X=M.sourceY,Y=M.targetX,K=M.targetY;return P(z,{id:C.id,className:ge([C.className,t.noPanClassName]),type:j,data:C.data,selected:!!C.selected,animated:!!C.animated,hidden:!!C.hidden,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,style:C.style,source:C.source,target:C.target,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerEnd:C.markerEnd,markerStart:C.markerStart,sourceX:T,sourceY:X,targetX:Y,targetY:K,sourcePosition:x,targetPosition:E,elementsSelectable:l,onEdgeUpdate:t.onEdgeUpdate,onContextMenu:t.onEdgeContextMenu,onMouseEnter:t.onEdgeMouseEnter,onMouseMove:t.onEdgeMouseMove,onMouseLeave:t.onEdgeMouseLeave,onClick:t.onEdgeClick,edgeUpdaterRadius:t.edgeUpdaterRadius,onEdgeDoubleClick:t.onEdgeDoubleClick,onEdgeUpdateStart:t.onEdgeUpdateStart,onEdgeUpdateEnd:t.onEdgeUpdateEnd},C.id)}),D&&$&&P(cg,{connectionNodeId:o,connectionHandleId:r,connectionHandleType:a,connectionPositionX:i.x,connectionPositionY:i.y,connectionLineStyle:m,connectionLineType:g,isConnectable:s,CustomConnectionLineComponent:b})]})]},k)})})};Ki.displayName="EdgeRenderer";var wg=w.exports.memo(Ki),Sg=function(t){return t.transform};function xg(e){var t=e.children,n=se(Sg);return P("div",{className:"react-flow__viewport react-flow__container",style:{transform:"translate(".concat(n[0],"px,").concat(n[1],"px) scale(").concat(n[2],")")},children:t})}function Cg(e){var t=gi(),n=w.exports.useRef(!1);w.exports.useEffect(function(){!n.current&&t.viewportInitialized&&e&&(setTimeout(function(){return e(t)},1),n.current=!0)},[e,t.viewportInitialized])}var Zi=function(t){var n=t.nodeTypes,o=t.edgeTypes,r=t.onMove,a=t.onMoveStart,i=t.onMoveEnd,s=t.onInit,l=t.onNodeClick,c=t.onEdgeClick,u=t.onNodeDoubleClick,p=t.onEdgeDoubleClick,f=t.onNodeMouseEnter,d=t.onNodeMouseMove,g=t.onNodeMouseLeave,h=t.onNodeContextMenu,m=t.onNodeDragStart,b=t.onNodeDrag,D=t.onNodeDragStop,N=t.onSelectionDragStart,k=t.onSelectionDrag,S=t.onSelectionDragStop,$=t.onSelectionContextMenu,C=t.connectionLineType,_=t.connectionLineStyle,B=t.connectionLineComponent,A=t.selectionKeyCode,V=t.multiSelectionKeyCode,W=t.zoomActivationKeyCode,U=t.deleteKeyCode,y=t.onlyRenderVisibleElements,R=t.elementsSelectable,O=t.selectNodesOnDrag,I=t.defaultZoom,j=t.defaultPosition,z=t.preventScrolling,H=t.defaultMarkerColor,L=t.zoomOnScroll,v=t.zoomOnPinch,x=t.panOnScroll,E=t.panOnScrollSpeed,M=t.panOnScrollMode,T=t.zoomOnDoubleClick,X=t.panOnDrag,Y=t.onPaneClick,K=t.onPaneScroll,Z=t.onPaneContextMenu,re=t.onEdgeUpdate,q=t.onEdgeContextMenu,ae=t.onEdgeMouseEnter,ee=t.onEdgeMouseMove,le=t.onEdgeMouseLeave,Q=t.edgeUpdaterRadius,xe=t.onEdgeUpdateStart,ke=t.onEdgeUpdateEnd,Ee=t.noDragClassName,Ne=t.noWheelClassName,Ce=t.noPanClassName;return Cg(s),P(rg,{onPaneClick:Y,onPaneContextMenu:Z,onPaneScroll:K,deleteKeyCode:U,selectionKeyCode:A,multiSelectionKeyCode:V,zoomActivationKeyCode:W,elementsSelectable:R,onMove:r,onMoveStart:a,onMoveEnd:i,zoomOnScroll:L,zoomOnPinch:v,zoomOnDoubleClick:T,panOnScroll:x,panOnScrollSpeed:E,panOnScrollMode:M,panOnDrag:X,defaultPosition:j,defaultZoom:I,onSelectionDragStart:N,onSelectionDrag:k,onSelectionDragStop:S,onSelectionContextMenu:$,preventScrolling:z,noDragClassName:Ee,noWheelClassName:Ne,noPanClassName:Ce,children:J(xg,{children:[P(wg,{edgeTypes:o,onEdgeClick:c,onEdgeDoubleClick:p,connectionLineType:C,connectionLineStyle:_,connectionLineComponent:B,onEdgeUpdate:re,onlyRenderVisibleElements:y,onEdgeContextMenu:q,onEdgeMouseEnter:ae,onEdgeMouseMove:ee,onEdgeMouseLeave:le,onEdgeUpdateStart:xe,onEdgeUpdateEnd:ke,edgeUpdaterRadius:Q,defaultMarkerColor:H,noPanClassName:Ce}),P(sg,{nodeTypes:n,onNodeClick:l,onNodeDoubleClick:u,onNodeMouseEnter:f,onNodeMouseMove:d,onNodeMouseLeave:g,onNodeContextMenu:h,onNodeDragStop:D,onNodeDrag:b,onNodeDragStart:m,selectNodesOnDrag:O,onlyRenderVisibleElements:y,noPanClassName:Ce,noDragClassName:Ee})]})})};Zi.displayName="GraphView";var Og=w.exports.memo(Zi),Gi=function(){return null};Gi.displayName="GroupNode";function fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Eg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fa(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fa(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Pt(e,t,n,o){var r=w.exports.useCallback(function(a){if(typeof o!="undefined"&&!t){var i=n().nodeInternals.get(e);o(a,Eg({},i))}},[o,t,e]);return r}function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pa(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Ng=function(t){return{addSelectedNodes:t.addSelectedNodes,updateNodePosition:t.updateNodePosition,unselectNodesAndEdges:t.unselectNodesAndEdges,updateNodeDimensions:t.updateNodeDimensions}},_t=function(e){var t=function(o){var r=o.id,a=o.type,i=o.data,s=o.scale,l=o.xPos,c=o.yPos,u=o.selected,p=o.onClick,f=o.onMouseEnter,d=o.onMouseMove,g=o.onMouseLeave,h=o.onContextMenu,m=o.onNodeDoubleClick,b=o.onNodeDragStart,D=o.onNodeDrag,N=o.onNodeDragStop,k=o.style,S=o.className,$=o.isDraggable,C=o.isSelectable,_=o.isConnectable,B=o.selectNodesOnDrag,A=o.sourcePosition,V=o.targetPosition,W=o.hidden,U=o.snapToGrid,y=o.snapGrid,R=o.dragging,O=o.resizeObserver,I=o.dragHandle,j=o.zIndex,z=o.isParent,H=o.noPanClassName,L=o.noDragClassName,v=Se(),x=se(Ng,pe),E=x.addSelectedNodes,M=x.unselectNodesAndEdges,T=x.updateNodePosition,X=x.updateNodeDimensions,Y=w.exports.useRef(null),K=w.exports.useRef(A),Z=w.exports.useRef(V),re=w.exports.useRef(a),q=C||$||p||f||d||g,ae=w.exports.useMemo(function(){return Fe({zIndex:j,transform:"translate(".concat(l,"px,").concat(c,"px)"),pointerEvents:q?"all":"none"},k)},[j,l,c,q,k]),ee=w.exports.useMemo(function(){return U?y:[1,1]},[U,y==null?void 0:y[0],y==null?void 0:y[1]]),le=Pt(r,R,v.getState,f),Q=Pt(r,R,v.getState,d),xe=Pt(r,R,v.getState,g),ke=Pt(r,!1,v.getState,h),Ee=Pt(r,!1,v.getState,m),Ne=w.exports.useCallback(function(ce){if(!$&&(C&&(v.setState({nodesSelectionActive:!1}),u||E([r])),p)){var ne=v.getState().nodeInternals.get(r);p(ce,Fe({},ne))}},[C,u,$,p,r]),Ce=w.exports.useCallback(function(ce){if(B&&C)v.setState({nodesSelectionActive:!1}),u||E([r]);else if(!B&&!u&&C){var ne=v.getState(),he=ne.multiSelectionActive;he?E([r]):(M(),v.setState({nodesSelectionActive:!1}))}if(b){var Ie=v.getState().nodeInternals.get(r);b(ce,Fe({},Ie))}},[r,u,B,C,b]),et=w.exports.useCallback(function(ce,ne){if(T({id:r,dragging:!0,diff:{x:ne.deltaX,y:ne.deltaY}}),D){var he,Ie,$e=v.getState().nodeInternals.get(r);D(ce,Fe(Fe({},$e),{},{dragging:!0,position:{x:$e.position.x+ne.deltaX,y:$e.position.y+ne.deltaY},positionAbsolute:{x:(((he=$e.positionAbsolute)===null||he===void 0?void 0:he.x)||0)+ne.deltaX,y:(((Ie=$e.positionAbsolute)===null||Ie===void 0?void 0:Ie.y)||0)+ne.deltaY}}))}},[r,D]),Le=w.exports.useCallback(function(ce){var ne;if((p||N)&&(ne=v.getState().nodeInternals.get(r)),!R){C&&!B&&!u&&E([r]),p&&ne&&p(ce,Fe({},ne));return}T({id:r,dragging:!1}),N&&ne&&N(ce,Fe(Fe({},ne),{},{dragging:!1}))},[r,C,B,p,N,R,u]);if(w.exports.useEffect(function(){if(Y.current&&!W){var ce=Y.current;return O==null||O.observe(ce),function(){return O==null?void 0:O.unobserve(ce)}}},[W]),w.exports.useEffect(function(){var ce=re.current!==a,ne=K.current!==A,he=Z.current!==V;Y.current&&(ce||ne||he)&&(ce&&(re.current=a),ne&&(K.current=A),he&&(Z.current=V),X([{id:r,nodeElement:Y.current,forceUpdate:!0}]))},[r,a,A,V]),W)return null;var xt=ge(["react-flow__node","react-flow__node-".concat(a),H,S,{selected:u,selectable:C,parent:z}]);return P(Pi,{onStart:Ce,onDrag:et,onStop:Le,scale:s,disabled:!$,cancel:".".concat(L),nodeRef:Y,grid:ee,enableUserSelectHack:!1,handle:I,children:P("div",{className:xt,ref:Y,style:ae,onMouseEnter:le,onMouseMove:Q,onMouseLeave:xe,onContextMenu:ke,onClick:Ne,onDoubleClick:Ee,"data-id":r,children:P(Pp,{value:r,children:P(e,{id:r,data:i,type:a,xPos:l,yPos:c,selected:u,isConnectable:_,sourcePosition:A,targetPosition:V,dragging:R,dragHandle:I,zIndex:j})})})})};return t.displayName="NodeWrapper",w.exports.memo(t)};function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ga(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Pg(e){var t={input:_t(e.input||Xi),default:_t(e.default||bo),output:_t(e.output||Vi),group:_t(e.group||Gi)},n={},o=Object.keys(e).filter(function(r){return!["input","default","output","group"].includes(r)}).reduce(function(r,a){return r[a]=_t(e[a]||bo),r},n);return ha(ha({},t),o)}function va(e,t){w.exports.useRef(null);var n=w.exports.useMemo(function(){return t(e)},[e]);return n}function ma(e){if(!(!e||typeof document=="undefined")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");t.appendChild(n),n.appendChild(document.createTextNode(e))}}var qi=function(t){var n=t.children,o=!0;try{Se()}catch{o=!1}return o?P(Je,{children:n}):P(fi,{createStore:pi,children:n})};qi.displayName="ReactFlowWrapper";var _g=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions"];function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ya(Object(n),!0).forEach(function(o){oe(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}ma(Bp),ma(Ip);var Dg={input:Xi,default:bo,output:Vi},Mg={default:mo,straight:zi,step:Ai,smoothstep:Bo,simplebezier:Ti},kg=[15,15],$g=[0,0],Qi=w.exports.forwardRef(function(e,t){var n=e.nodes,o=e.edges,r=e.defaultNodes,a=e.defaultEdges,i=e.className,s=e.nodeTypes,l=s===void 0?Dg:s,c=e.edgeTypes,u=c===void 0?Mg:c,p=e.onNodeClick,f=e.onEdgeClick,d=e.onInit,g=e.onMove,h=e.onMoveStart,m=e.onMoveEnd,b=e.onConnect,D=e.onConnectStart,N=e.onConnectStop,k=e.onConnectEnd,S=e.onNodeMouseEnter,$=e.onNodeMouseMove,C=e.onNodeMouseLeave,_=e.onNodeContextMenu,B=e.onNodeDoubleClick,A=e.onNodeDragStart,V=e.onNodeDrag,W=e.onNodeDragStop,U=e.onNodesDelete,y=e.onEdgesDelete,R=e.onSelectionChange,O=e.onSelectionDragStart,I=e.onSelectionDrag,j=e.onSelectionDragStop,z=e.onSelectionContextMenu,H=e.connectionMode,L=H===void 0?bt.Strict:H,v=e.connectionLineType,x=v===void 0?Ge.Bezier:v,E=e.connectionLineStyle,M=e.connectionLineComponent,T=e.deleteKeyCode,X=T===void 0?"Backspace":T,Y=e.selectionKeyCode,K=Y===void 0?"Shift":Y,Z=e.multiSelectionKeyCode,re=Z===void 0?"Meta":Z,q=e.zoomActivationKeyCode,ae=q===void 0?"Meta":q,ee=e.snapToGrid,le=ee===void 0?!1:ee,Q=e.snapGrid,xe=Q===void 0?kg:Q,ke=e.onlyRenderVisibleElements,Ee=ke===void 0?!1:ke,Ne=e.selectNodesOnDrag,Ce=Ne===void 0?!0:Ne,et=e.nodesDraggable,Le=e.nodesConnectable,xt=e.elementsSelectable,ce=e.minZoom,ne=e.maxZoom,he=e.defaultZoom,Ie=he===void 0?1:he,$e=e.defaultPosition,te=$e===void 0?$g:$e,ct=e.translateExtent,Lt=e.preventScrolling,$n=Lt===void 0?!0:Lt,Tn=e.nodeExtent,Xt=e.defaultMarkerColor,Rn=Xt===void 0?"#b1b1b7":Xt,Yt=e.zoomOnScroll,Ct=Yt===void 0?!0:Yt,Vt=e.zoomOnPinch,An=Vt===void 0?!0:Vt,Ft=e.panOnScroll,Wt=Ft===void 0?!1:Ft,Ut=e.panOnScrollSpeed,ts=Ut===void 0?.5:Ut,jo=e.panOnScrollMode,ns=jo===void 0?ht.Free:jo,Ho=e.zoomOnDoubleClick,os=Ho===void 0?!0:Ho,Lo=e.panOnDrag,rs=Lo===void 0?!0:Lo,as=e.onPaneClick,is=e.onPaneScroll,ss=e.onPaneContextMenu,ls=e.children,cs=e.onEdgeUpdate,us=e.onEdgeContextMenu,ds=e.onEdgeDoubleClick,fs=e.onEdgeMouseEnter,ps=e.onEdgeMouseMove,gs=e.onEdgeMouseLeave,hs=e.onEdgeUpdateStart,vs=e.onEdgeUpdateEnd,Xo=e.edgeUpdaterRadius,ms=Xo===void 0?10:Xo,ys=e.onNodesChange,bs=e.onEdgesChange,Yo=e.noDragClassName,ws=Yo===void 0?"nodrag":Yo,Vo=e.noWheelClassName,Ss=Vo===void 0?"nowheel":Vo,Fo=e.noPanClassName,xs=Fo===void 0?"nopan":Fo,Wo=e.fitView,Cs=Wo===void 0?!1:Wo,Os=e.fitViewOptions,Uo=e.connectOnClick,Es=Uo===void 0?!0:Uo,Ns=e.attributionPosition,Ps=e.proOptions,_s=e.defaultEdgeOptions,Ds=Ht(e,_g),Ms=va(l,Pg),ks=va(u,Xp),$s=ge(["react-flow",i]);return P("div",Te(Pe({},ba(ba({},Ds),{},{ref:t,className:$s})),{children:J(qi,{children:[P(Og,{onInit:d,onMove:g,onMoveStart:h,onMoveEnd:m,onNodeClick:p,onEdgeClick:f,onNodeMouseEnter:S,onNodeMouseMove:$,onNodeMouseLeave:C,onNodeContextMenu:_,onNodeDoubleClick:B,onNodeDragStart:A,onNodeDrag:V,onNodeDragStop:W,nodeTypes:Ms,edgeTypes:ks,connectionLineType:x,connectionLineStyle:E,connectionLineComponent:M,selectionKeyCode:K,deleteKeyCode:X,multiSelectionKeyCode:re,zoomActivationKeyCode:ae,onlyRenderVisibleElements:Ee,selectNodesOnDrag:Ce,defaultZoom:Ie,defaultPosition:te,preventScrolling:$n,zoomOnScroll:Ct,zoomOnPinch:An,zoomOnDoubleClick:os,panOnScroll:Wt,panOnScrollSpeed:ts,panOnScrollMode:ns,panOnDrag:rs,onPaneClick:as,onPaneScroll:is,onPaneContextMenu:ss,onSelectionDragStart:O,onSelectionDrag:I,onSelectionDragStop:j,onSelectionContextMenu:z,onEdgeUpdate:cs,onEdgeContextMenu:us,onEdgeDoubleClick:ds,onEdgeMouseEnter:fs,onEdgeMouseMove:ps,onEdgeMouseLeave:gs,onEdgeUpdateStart:hs,onEdgeUpdateEnd:vs,edgeUpdaterRadius:ms,defaultMarkerColor:Rn,noDragClassName:ws,noWheelClassName:Ss,noPanClassName:xs}),P(zp,{nodes:n,edges:o,defaultNodes:r,defaultEdges:a,onConnect:b,onConnectStart:D,onConnectStop:N,onConnectEnd:k,nodesDraggable:et,nodesConnectable:Le,elementsSelectable:xt,minZoom:ce,maxZoom:ne,nodeExtent:Tn,onNodesChange:ys,onEdgesChange:bs,snapToGrid:le,snapGrid:xe,connectionMode:L,translateExtent:ct,connectOnClick:Es,defaultEdgeOptions:_s,fitView:Cs,fitViewOptions:Os,onNodesDelete:U,onEdgesDelete:y}),R&&P(Rp,{onSelectionChange:R}),ls,P(wp,{proOptions:Ps,position:Ns})]})}))});Qi.displayName="ReactFlow";var Ji=function(t){var n=t.children;return P(fi,{createStore:pi,children:n})};Ji.displayName="ReactFlowProvider";function es(e){return function(t){var n=w.exports.useState(t),o=G(n,2),r=o[0],a=o[1],i=w.exports.useCallback(function(s){return a(function(l){return e(s,l)})},[]);return[r,a,i]}}var Tg=es(ri),Rg=es(Wd);function Ag(e,t){return t.find(o=>o.step.slug===e)}function zg({visibleFlow:e,steps:t}){const[n,o,r]=Tg([]),[a,i,s]=Rg([]),[l,c]=w.exports.useState(!1),[u,p]=w.exports.useState(),f=w.exports.useRef(null),{dispatch:d}=So();w.exports.useEffect(h,[e]),w.exports.useEffect(m,[n,a]),w.exports.useEffect(()=>{u==null||u.fitView(),window.scrollTo({top:9999,behavior:"smooth"})},[u,n]);const g=S=>{if(S.target.addEventListener("contextmenu",$=>$.preventDefault()),S.buttons===2){const $=S.target.dataset.id,C=n.filter(B=>B.id!==S.target.dataset.id),_=a.filter(B=>B.target!==$&&B.source!==$);i(_),o(C)}};function h(){const S=(e==null?void 0:e.steps)||[],$=S==null?void 0:S.reduce((_,B,A)=>{const V=S[A+1];if(!V)return _;const W={animated:!0,id:`flow-${e.slug}-edge-${B}-to-${V}`,source:B,sourceHandle:null,style:{stroke:"black"},target:V,targetHandle:null};return[..._,W]},[]),C=S==null?void 0:S.map((_,B)=>{const A=Ag(_,t);return{key:B,id:_,data:{label:A==null?void 0:A.step.friendlyname},sourcePosition:"right",targetPosition:"left",position:{x:180*B+1,y:150}}});o(C),i($),c(!0),u==null||u.fitView()}function m(){if(l){const S=a.reduce(($,C)=>{const{target:_,source:B}=C;let A=[...$];return $.includes(B)||A.push(B),$.includes(_)||A.push(_),A},[]);d({type:"CHANGE_FLOW_STEPS",payload:{slug:e.slug,newSteps:S}})}}const b=w.exports.useCallback(S=>i($=>$.some(_=>{var B;return(B=_==null?void 0:_.source)==null?void 0:B.includes(S.source)})?$:ai(S,$)),[i]),D=w.exports.useCallback(S=>{S.preventDefault(),S.dataTransfer,S.dataTransfer.dropEffect="move"},[]),N=w.exports.useCallback(S=>{S.preventDefault();const $=f.current.getBoundingClientRect(),C=S.dataTransfer.getData("nodeType"),_=S.dataTransfer.getData("stepCurrent"),B=S.dataTransfer.getData("valueStep");if(typeof C=="undefined"||!C)return;const A=u.project({x:S.clientX-$.left,y:S.clientY-$.top}),V={id:B,type:C,position:A,data:{label:_},sourcePosition:"right",targetPosition:"left"};o(W=>W.concat(V))},[u]),k=w.exports.useCallback(()=>{u&&(o([]),i([]))},[u]);return{nodes:n,onNodesChange:r,edges:a,onEdgesChange:s,reactFlowWrapper:f,setReactFlowInstance:p,onConnect:b,onDragOver:D,onDrop:N,onClean:k,removeNodeToClick:g}}const Bg={name:"9q61m7",styles:"max-width:300px;border-right:1px solid #eee;padding:15px 10px;font-size:12px;background:#fcfcfc"},Ig={name:"rzb6k5",styles:"display:flex;align-items:center;font-size:12px;font-weight:700;height:20px"},jg={name:"1fkjdrd",styles:"height:28px;padding:4px;border:1px solid #1a192b;border-radius:2px;margin-bottom:10px;display:flex;justify-content:center;align-items:center;cursor:grab"};function Hg({visibleFlow:e,steps:t}){const{currentJSON:n}=So(),o=n==null?void 0:n.tracks.find(i=>i.slug===e.slug);return{stepsAvailable:t.filter(i=>i.step.slug).reduce((i,s)=>{var c;if(!(((c=o==null?void 0:o.steps)==null?void 0:c.indexOf(s.step.slug))!==-1)){const u={slug:s.step.slug,friendlyname:s.step.friendlyname};return[...i,u]}return i},[])}}const Lg=(e,t,n)=>{e.dataTransfer.setData("nodeType",t),e.dataTransfer.setData("stepCurrent",e.target.innerHTML),e.dataTransfer.setData("valueStep",n),e.dataTransfer.effectAllowed="move"},Xg=({steps:e,visibleFlow:t})=>{const{stepsAvailable:n}=Hg({visibleFlow:t,steps:e});return J("aside",{css:Bg,children:[J("h2",{css:Ig,children:["You can chose any of the available steps",P(xa,{title:"Available steps",placement:"topLeft",content:"Rule ..... ... Available steps"})]}),n==null?void 0:n.map(o=>P("div",{css:jg,onDragStart:r=>Lg(r,"default",o.slug),draggable:!0,children:o==null?void 0:o.friendlyname},`step-item-${o==null?void 0:o.friendlyname}`))]})},Yg=()=>P(ap,{nodeStrokeColor:e=>{var t;return(t=e.style)!=null&&t.background?e.style.background:e.type==="input"?"#0041d0":e.type==="output"?"#ff0072":e.type==="default"?"black":"#eee3"},nodeColor:e=>{var t;return(t=e.style)!=null&&t.background?e.style.background:"#533554"},nodeBorderRadius:3}),Vg=({sourceX:e,sourceY:t,sourcePosition:n,targetX:o,targetY:r,targetPosition:a,connectionLineType:i,connectionLineStyle:s})=>J("g",{children:[P("path",{fill:"none",stroke:"#222",strokeWidth:2,d:`M${e},${t} C ${e} ${r} ${e} ${r} ${o},${r}`}),P("circle",{cx:o,cy:r,fill:"#fff",r:5,stroke:"#222",strokeWidth:1.5})]}),Fg={animated:!0,style:{stroke:"black"}},Wg={stroke:"black"},Ug={name:"45krtt",styles:"margin-left:10px;padding:3px 5px;cursor:pointer"};var Kg={name:"1d3w5wq",styles:"width:100%"},Zg={name:"1ff36h2",styles:"flex-grow:1"},Gg={name:"fp2oy0",styles:"width:40px;display:flex;flex-direction:column;align-items:center;button{width:40px;height:35px;}"},qg={name:"wiws5n",styles:"position:absolute;right:10px;top:10px;z-index:4;font-size:12px"};const Qg=({visibleFlow:e,steps:t})=>{const{reactFlowWrapper:n,nodes:o,onNodesChange:r,edges:a,onEdgesChange:i,onConnect:s,setReactFlowInstance:l,onDrop:c,onDragOver:u,onClean:p,removeNodeToClick:f}=zg({visibleFlow:e,steps:t});return P(Us,{title:e.slug,css:Kg,children:J("div",{css:wa({width:"100%",height:`${document.body.clientHeight/1.45}px`,background:"#FFFFFF",flexDirection:"row",display:"flex",flexGrow:"1"},"",""),children:[P("div",{css:Zg,ref:n,onContextMenu:d=>d.preventDefault(),children:J(Qi,{defaultEdgeOptions:Fg,defaultZoom:1,connectionLineStyle:Wg,nodes:o,onNodesChange:r,edges:a,onEdgesChange:i,onConnect:s,onInit:l,onDrop:c,onDragOver:u,connectionLineComponent:Vg,onMouseDown:f,children:[P(gp,{css:Gg}),P(bp,{color:"#aaa",gap:10}),P(Yg,{}),P("div",{css:qg,children:P("button",{css:Ug,onClick:p,children:"Clean"})})]})}),P(Xg,{steps:t,visibleFlow:e})]})})};var Jg=({visibleFlow:e,steps:t})=>P(Ji,{children:P(Qg,{steps:t,visibleFlow:e})}),eh={name:"9r75xi",styles:"flex-direction:row;justify-content:center"};const ah=()=>{const{visibleFlow:e,changeVisibleFlow:t,addNewFlow:n,renameFlow:o,removeFlow:r,flows:a,steps:i}=Qs();return J(Ys,{css:eh,children:[P(cl,{flows:a,addNewFlow:n,renameFlow:o,removeFlow:r,visibleFlow:e,changeVisibleFlow:t}),P(Jg,{visibleFlow:e,steps:i})]})};export{ah as default};
